

  
  
 
  
 


<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>librosa Package &mdash; librosa 0.2.1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/flatly/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.0.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="librosa 0.2.1 documentation" href="index.html" />
    <link rel="prev" title="Project Modules" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">LibROSA</a>
        <span class="navbar-text navbar-version pull-left"><b>0.2</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a href="index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">librosa Package</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">librosa Package</a><ul>
<li><a class="reference internal" href="#module-librosa.beat"><tt class="docutils literal"><span class="pre">Beat</span> <span class="pre">tracking</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.core"><tt class="docutils literal"><span class="pre">Core</span> <span class="pre">utilities</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.decompose"><tt class="docutils literal"><span class="pre">Spectrogram</span> <span class="pre">decomposition</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.display"><tt class="docutils literal"><span class="pre">Display</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.feature"><tt class="docutils literal"><span class="pre">Feature</span> <span class="pre">extraction</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.filters"><tt class="docutils literal"><span class="pre">Filter</span> <span class="pre">banks</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.onset"><tt class="docutils literal"><span class="pre">Onset</span> <span class="pre">detection</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.output"><tt class="docutils literal"><span class="pre">Output</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.segment"><tt class="docutils literal"><span class="pre">Segmentation</span></tt></a></li>
<li><a class="reference internal" href="#module-librosa.util"><tt class="docutils literal"><span class="pre">Utilities</span></tt></a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
  <li><a href="index.html"
         title="Previous Chapter: Project Modules">&laquo; Project Modules</a></li>
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="librosa-package">
<h1>librosa Package<a class="headerlink" href="#librosa-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-librosa.beat">
<span id="beat-tracking"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Beat</span> <span class="pre">tracking</span></tt><a class="headerlink" href="#module-librosa.beat" title="Permalink to this headline">¶</a></h2>
<p>Beat tracking and tempo estimation</p>
<dl class="function">
<dt id="librosa.beat.beat_track">
<tt class="descclassname">librosa.beat.</tt><tt class="descname">beat_track</tt><big>(</big><em>y=None</em>, <em>sr=22050</em>, <em>onsets=None</em>, <em>hop_length=64</em>, <em>start_bpm=120.0</em>, <em>tightness=400</em>, <em>trim=True</em>, <em>bpm=None</em><big>)</big><a class="headerlink" href="#librosa.beat.beat_track" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamic programming beat tracker.</p>
<dl class="docutils">
<dt>Beats are detected in three stages:</dt>
<dd><ol class="first last arabic simple">
<li>Measure onset strength</li>
<li>Estimate tempo from onset correlation</li>
<li>Pick peaks in onset strength approximately consistent with estimated tempo</li>
</ol>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Track beats using time series input</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span> <span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Track beats using a pre-computed onset envelope</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span> <span class="n">onsets</span><span class="o">=</span><span class="n">onset_envelope</span><span class="p">,</span> 
<span class="go">                                            sr=sr, </span>
<span class="go">                                            hop_length=hop_length)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>onsets <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">(optional) pre-computed onset strength envelope
See <tt class="docutils literal"><span class="pre">librosa.onset.onset_strength</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">number of audio samples between successive <tt class="docutils literal"><span class="pre">onsets</span></tt> values (FFT frames)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>start_bpm <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">initial guess for the tempo estimator</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tightness <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">tightness of beat distribution around tempo</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>trim <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">trim leading/trailing beats with weak onsets?</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bpm <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">(optional) If provided, use this BPM instead of estimating it</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of either <tt class="docutils literal"><span class="pre">onsets</span></tt> or <tt class="docutils literal"><span class="pre">y</span></tt> must be provided.</p>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>tempo <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">estimated global tempo</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">estimated frame numbers of beats</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError  </dt>
<dd><p class="first last">if neither <tt class="docutils literal"><span class="pre">y</span></tt> nor <tt class="docutils literal"><span class="pre">onsets</span></tt> are provided</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If no onset strength could be detected, beat_tracker estimates 0 BPM and returns
an empty list.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last">
<li><p class="first"><a class="reference external" href="http://labrosa.ee.columbia.edu/projects/beattrack/">http://labrosa.ee.columbia.edu/projects/beattrack/</a></p>
</li>
<li><dl class="first docutils">
<dt>&#64;article{ellis2007beat,</dt>
<dd><p class="first last">title={Beat tracking by dynamic programming},
author={Ellis, Daniel PW},
journal={Journal of New Music Research},
volume={36},
number={1},
pages={51&#8211;60},
year={2007},
publisher={Taylor &amp; Francis} }</p>
</dd>
</dl>
</li>
</ul>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.beat.estimate_tempo">
<tt class="descclassname">librosa.beat.</tt><tt class="descname">estimate_tempo</tt><big>(</big><em>onsets</em>, <em>sr=22050</em>, <em>hop_length=64</em>, <em>start_bpm=120</em>, <em>std_bpm=1.0</em>, <em>ac_size=4.0</em>, <em>duration=90.0</em>, <em>offset=0.0</em><big>)</big><a class="headerlink" href="#librosa.beat.estimate_tempo" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the tempo (beats per minute) from an onset envelope</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">estimate_tempo</span><span class="p">(</span><span class="n">onset_strength</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>onsets <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray   </span></dt>
<dd><p class="first last">onset strength envelope.
See <tt class="docutils literal"><span class="pre">librosa.onset.onset_strength()</span></tt> for details.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr: <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">sampling rate of the time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">hop length of the time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>start_bpm <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">initial guess of the BPM</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>std_bpm <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">standard deviation of tempo distribution</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ac_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">length (in seconds) of the auto-correlation window</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>duration <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">length of signal (in seconds) to use in estimating tempo</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>offset <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">offset (in seconds) of signal sample to use in estimating tempo</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>tempo <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">estimated tempo (beats per minute)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-librosa.core">
<span id="core-utilities"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Core</span> <span class="pre">utilities</span></tt><a class="headerlink" href="#module-librosa.core" title="Permalink to this headline">¶</a></h2>
<p>Core IO, DSP and utility functions.</p>
<dl class="function">
<dt id="librosa.core.load">
<tt class="descclassname">librosa.core.</tt><tt class="descname">load</tt><big>(</big><em>path</em>, <em>sr=22050</em>, <em>mono=True</em>, <em>offset=0.0</em>, <em>duration=None</em>, <em>dtype=&lt;type 'numpy.float32'&gt;</em><big>)</big><a class="headerlink" href="#librosa.core.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an audio file as a floating point time series.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Load a wav file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Load a wav file and resample to 11 KHz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">11025</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Load 5 seconds of a wav file, starting 15 seconds in</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">path to the input file.  
Any format supported by <tt class="docutils literal"><span class="pre">audioread</span></tt> will work.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">target sampling rate
&#8216;None&#8217; uses the native sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>mono <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">convert signal to mono</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>offset <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">start reading after this time (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>duration <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">only load up to this much audio (in seconds)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>dtype <span class="classifier-delimiter">:</span> <span class="classifier">numeric type</span></dt>
<dd><p class="first last">data type of y</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int  </span></dt>
<dd><p class="first last">sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.resample">
<tt class="descclassname">librosa.core.</tt><tt class="descname">resample</tt><big>(</big><em>y</em>, <em>orig_sr</em>, <em>target_sr</em>, <em>res_type='sinc_fastest'</em><big>)</big><a class="headerlink" href="#librosa.core.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Resample a signal from orig_sr to target_sr</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Downsample from 22 KHz to 8 KHz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_8k</span>    <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>orig_sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">original sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>target_sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">target sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>res_type <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">resample type (see note)</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>y_hat <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">y</span></tt> resampled from <tt class="docutils literal"><span class="pre">orig_sr</span></tt> to <tt class="docutils literal"><span class="pre">target_sr</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If scikits.samplerate is installed, resample will use res_type
otherwise, it will fall back on scipy.signal.resample</p>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.stft">
<tt class="descclassname">librosa.core.</tt><tt class="descname">stft</tt><big>(</big><em>y</em>, <em>n_fft=2048</em>, <em>hop_length=None</em>, <em>win_length=None</em>, <em>window=None</em><big>)</big><a class="headerlink" href="#librosa.core.stft" title="Permalink to this definition">¶</a></dt>
<dd><p>Short-time Fourier transform.</p>
<dl class="docutils">
<dt>Returns a complex-valued matrix D such that</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">np.abs(D[f,</span> <span class="pre">t])</span></tt> is the magnitude of frequency bin <tt class="docutils literal"><span class="pre">f</span></tt> at time <tt class="docutils literal"><span class="pre">t</span></tt></li>
<li><tt class="docutils literal"><span class="pre">np.angle(D[f,</span> <span class="pre">t])</span></tt> is the phase of frequency bin <tt class="docutils literal"><span class="pre">f</span></tt> at time <tt class="docutils literal"><span class="pre">t</span></tt></li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, real-valued</span></dt>
<dd><p class="first last">the input signal (audio time series)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">FFT window size</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number audio of frames between STFT columns.
If unspecified, defaults <tt class="docutils literal"><span class="pre">win_length</span> <span class="pre">/</span> <span class="pre">4</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &lt;= n_fft</span></dt>
<dd><p class="first">Each frame of audio is windowed by the <tt class="docutils literal"><span class="pre">window</span></tt> function (see below).
The window will be of length <tt class="docutils literal"><span class="pre">win_length</span></tt> and then padded with zeros
to match <tt class="docutils literal"><span class="pre">n_fft</span></tt>.</p>
<p class="last">If unspecified, defaults to <tt class="docutils literal"><span class="pre">win_length</span> <span class="pre">=</span> <span class="pre">n_fft</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">None, function, np.ndarray</span></dt>
<dd><ul class="first last simple">
<li>None (default): use an asymmetric Hann window</li>
<li>a window function, such as <tt class="docutils literal"><span class="pre">scipy.signal.hanning</span></tt></li>
<li>a vector or array of length <tt class="docutils literal"><span class="pre">n_fft</span></tt></li>
</ul>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=complex</span></dt>
<dd><p class="first last">STFT matrix</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.istft">
<tt class="descclassname">librosa.core.</tt><tt class="descname">istft</tt><big>(</big><em>stft_matrix</em>, <em>hop_length=None</em>, <em>win_length=None</em>, <em>window=None</em><big>)</big><a class="headerlink" href="#librosa.core.istft" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse short-time Fourier transform.</p>
<p>Converts a complex-valued spectrogram <tt class="docutils literal"><span class="pre">stft_matrix</span></tt> to time-series <tt class="docutils literal"><span class="pre">y</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_hat</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>stft_matrix <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(1 + n_fft/2, t)</span></dt>
<dd><p class="first last">STFT matrix from <tt class="docutils literal"><span class="pre">stft()</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of frames between STFT columns.
If unspecified, defaults to <tt class="docutils literal"><span class="pre">win_length</span> <span class="pre">/</span> <span class="pre">4</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &lt;= n_fft = 2 * (stft_matrix.shape[0] - 1)</span></dt>
<dd><p class="first">When reconstructing the time series, each frame is windowed
according to the <tt class="docutils literal"><span class="pre">window</span></tt> function (see below).</p>
<p class="last">If unspecified, defaults to <tt class="docutils literal"><span class="pre">n_fft</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">None, function, np.ndarray</span></dt>
<dd><ul class="first last simple">
<li>None (default): use an asymmetric Hann window * 2/3</li>
<li>a window function, such as <tt class="docutils literal"><span class="pre">scipy.signal.hanning</span></tt></li>
<li>a user-specified window vector of length <tt class="docutils literal"><span class="pre">n_fft</span></tt></li>
</ul>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">time domain signal reconstructed from <tt class="docutils literal"><span class="pre">stft_matrix</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.ifgram">
<tt class="descclassname">librosa.core.</tt><tt class="descname">ifgram</tt><big>(</big><em>y</em>, <em>sr=22050</em>, <em>n_fft=2048</em>, <em>hop_length=None</em>, <em>win_length=None</em>, <em>norm=False</em><big>)</big><a class="headerlink" href="#librosa.core.ifgram" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the instantaneous frequency (as a proportion of the sampling rate)
obtained as the time-derivative of the phase of the complex spectrum as 
described by Toshihiro Abe et al. in ICASSP&#8216;95, Eurospeech&#8216;97.</p>
<p>Calculates regular STFT as a side effect.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frequencies</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">ifgram</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">FFT window size</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">hop length, number samples between subsequent frames.
If not supplied, defaults to <tt class="docutils literal"><span class="pre">win_length</span> <span class="pre">/</span> <span class="pre">4</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0, &lt;= n_fft</span></dt>
<dd><p class="first last">Window length. Defaults to n_fft.
See <tt class="docutils literal"><span class="pre">stft()</span></tt> for details.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Normalize the STFT.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>if_gram <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=real</span></dt>
<dd><p class="first last">Instantaneous frequency spectrogram:
<tt class="docutils literal"><span class="pre">if_gram[f,</span> <span class="pre">t]</span></tt> is the frequency at bin <tt class="docutils literal"><span class="pre">f</span></tt>, time <tt class="docutils literal"><span class="pre">t</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=complex</span></dt>
<dd><p class="first last">Short-time Fourier transform</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt>&#64;inproceedings{abe1995harmonics,</dt>
<dd>title={Harmonics tracking and pitch extraction based on instantaneous frequency},
author={Abe, Toshihiko and Kobayashi, Takao and Imai, Satoshi},
booktitle={Acoustics, Speech, and Signal Processing, 1995. ICASSP-95., 1995 International Conference on},
volume={1},
pages={756&#8211;759},
year={1995},
organization={IEEE}
}</dd>
</dl>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.cqt">
<tt class="descclassname">librosa.core.</tt><tt class="descname">cqt</tt><big>(</big><em>y</em>, <em>sr</em>, <em>hop_length=512</em>, <em>fmin=None</em>, <em>fmax=None</em>, <em>bins_per_octave=12</em>, <em>tuning=None</em>, <em>resolution=2</em>, <em>aggregate=None</em>, <em>samples=None</em>, <em>basis=None</em><big>)</big><a class="headerlink" href="#librosa.core.cqt" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the constant-Q transform of an audio signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Limit the frequency range</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_hz</span><span class="p">(</span><span class="mi">36</span><span class="p">),</span> <span class="n">fmax</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_hz</span><span class="p">(</span><span class="mi">96</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use a pre-computed CQT basis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basis</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">constant_q</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">basis</span><span class="o">=</span><span class="n">basis</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">number of samples between successive CQT columns.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Minimum frequency. Defaults to C1 ~= 16.35 Hz</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Maximum frequency. Defaults to C9 ~= 4816.01 Hz</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of bins per octave</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">None or float in [-0.5, 0.5)</span></dt>
<dd><p class="first last">Tuning offset in fractions of a bin (cents)
If None, tuning will be automatically estimated.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>resolution <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Filter resolution factor. Larger values use longer windows.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>aggregate <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Aggregator function to merge filter response power within frames.
Default: np.mean</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>samples <span class="classifier-delimiter">:</span> <span class="classifier">None or array-like</span></dt>
<dd><p class="first">Aggregate power at times <tt class="docutils literal"><span class="pre">y[samples[i]:samples[i+1]]</span></tt>, 
instead of <tt class="docutils literal"><span class="pre">y[i</span> <span class="pre">*</span> <span class="pre">hop_length</span> <span class="pre">:</span> <span class="pre">(i+1)*hop_length]</span></tt></p>
<p class="last">Note that boundary sample times <tt class="docutils literal"><span class="pre">(0,</span> <span class="pre">len(y))</span></tt> will be automatically added.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>basis <span class="classifier-delimiter">:</span> <span class="classifier">None or list of arrays</span></dt>
<dd><p class="first last">(optinal) alternate set of CQT basis filters.
See <tt class="docutils literal"><span class="pre">librosa.filters.constant_q</span></tt> for details.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>CQT <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">Constant-Q power for each frequency at each time.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.logamplitude">
<tt class="descclassname">librosa.core.</tt><tt class="descname">logamplitude</tt><big>(</big><em>S</em>, <em>ref_power=1.0</em>, <em>amin=1e-10</em>, <em>top_db=80.0</em><big>)</big><a class="headerlink" href="#librosa.core.logamplitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Log-scale the amplitude of a spectrogram.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get a power spectrogram from a waveform y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span>       <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_S</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">logamplitude</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Compute dB relative to peak power</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_S</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">logamplitude</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">ref_power</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">input spectrogram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ref_power <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">reference against which <tt class="docutils literal"><span class="pre">S</span></tt> is compared.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>amin <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">minimum amplitude threshold</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>top_db <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">threshold log amplitude at top_db below the peak:
<tt class="docutils literal"><span class="pre">max(log(S))</span> <span class="pre">-</span> <span class="pre">top_db</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><dl class="docutils">
<dt>log_S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">log_S</span> <span class="pre">~=</span> <span class="pre">10</span> <span class="pre">*</span> <span class="pre">log10(S)</span> <span class="pre">-</span> <span class="pre">10</span> <span class="pre">*</span> <span class="pre">log10(abs(ref_power))</span></tt></p>
</dd>
</dl>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.magphase">
<tt class="descclassname">librosa.core.</tt><tt class="descname">magphase</tt><big>(</big><em>D</em><big>)</big><a class="headerlink" href="#librosa.core.magphase" title="Permalink to this definition">¶</a></dt>
<dd><p>Separate a complex-valued spectrogram D into its magnitude (S)
and phase (P) components, so that <tt class="docutils literal"><span class="pre">D</span> <span class="pre">=</span> <span class="pre">S</span> <span class="pre">*</span> <span class="pre">P</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">,</span> <span class="n">P</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">==</span> <span class="n">S</span> <span class="o">*</span> <span class="n">P</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=complex</span></dt>
<dd><p class="first last">complex-valued spectrogram</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>D_mag <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=real</span></dt>
<dd><p class="first last">magnitude of <tt class="docutils literal"><span class="pre">D</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>D_phase <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=complex</span></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">exp(1.j</span> <span class="pre">*</span> <span class="pre">phi)</span></tt> where <tt class="docutils literal"><span class="pre">phi</span></tt> is the phase of <tt class="docutils literal"><span class="pre">D</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.phase_vocoder">
<tt class="descclassname">librosa.core.</tt><tt class="descname">phase_vocoder</tt><big>(</big><em>D</em>, <em>rate</em>, <em>hop_length=None</em><big>)</big><a class="headerlink" href="#librosa.core.phase_vocoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Phase vocoder.  Given an STFT matrix D, speed up by a factor of <tt class="docutils literal"><span class="pre">rate</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Play at double speed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D_fast</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">phase_vocoder</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_fast</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">D_fast</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or play at 1/3 speed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D_slow</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">phase_vocoder</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_slow</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">D_slow</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=complex</span></dt>
<dd><p class="first last">STFT matrix</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>rate <span class="classifier-delimiter">:</span> <span class="classifier">float, positive</span></dt>
<dd><p class="first last">Speed-up factor: <tt class="docutils literal"><span class="pre">rate</span> <span class="pre">&gt;</span> <span class="pre">1</span></tt> is faster, <tt class="docutils literal"><span class="pre">rate</span> <span class="pre">&lt;</span> <span class="pre">1</span></tt> is slower.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int or None</span></dt>
<dd><p class="first last">The number of samples between successive columns of <tt class="docutils literal"><span class="pre">D</span></tt>.
If None, defaults to <tt class="docutils literal"><span class="pre">n_fft/4</span> <span class="pre">=</span> <span class="pre">(D.shape[0]-1)/2</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>D_stretched <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=complex</span></dt>
<dd><p class="first last">time-stretched STFT</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last">
<li><p class="first">This implementation was ported from the following:</p>
</li>
<li><dl class="first docutils">
<dt>&#64;misc{Ellis02-pvoc</dt>
<dd><p class="first last">author = {D. P. W. Ellis},
year = {2002},
title = {A Phase Vocoder in {M}atlab},
note = {Web resource},
url = {<a class="reference external" href="http://www.ee.columbia.edu/~dpwe/resources/matlab/pvoc/">http://www.ee.columbia.edu/~dpwe/resources/matlab/pvoc/</a>},}</p>
</dd>
</dl>
</li>
</ul>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.note_to_midi">
<tt class="descclassname">librosa.core.</tt><tt class="descname">note_to_midi</tt><big>(</big><em>note</em><big>)</big><a class="headerlink" href="#librosa.core.note_to_midi" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert one or more spelled notes to MIDI number(s).</p>
<p>Notes may be spelled out with optional accidentals or octave numbers.</p>
<p>The leading note name is case-insensitive.</p>
<p>Sharps are indicated with <tt class="docutils literal"><span class="pre">#</span></tt>, flats may be indicated with <tt class="docutils literal"><span class="pre">!</span></tt> or <tt class="docutils literal"><span class="pre">b</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s">&#39;C&#39;</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s">&#39;C#3&#39;</span><span class="p">)</span>
<span class="go">37</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s">&#39;f4&#39;</span><span class="p">)</span>
<span class="go">53</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s">&#39;Bb-1&#39;</span><span class="p">)</span>
<span class="go">-2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s">&#39;A!8&#39;</span><span class="p">)</span> 
<span class="go">104</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first simple">
<li>note : str or iterable of str
One or more note names.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>midi : int or np.array
Midi note numbers corresponding to inputs.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.midi_to_note">
<tt class="descclassname">librosa.core.</tt><tt class="descname">midi_to_note</tt><big>(</big><em>midi</em>, <em>octave=True</em>, <em>cents=False</em><big>)</big><a class="headerlink" href="#librosa.core.midi_to_note" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert one or more MIDI numbers to note strings.</p>
<p>MIDI numbers will be rounded to the nearest integer.</p>
<p>Notes will be of the format &#8216;C0&#8217;, &#8216;C#0&#8217;, &#8216;D0&#8217;, ...</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;C0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<span class="go">&#39;C#3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;A#-1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mf">104.7</span><span class="p">)</span>
<span class="go">&#39;A8&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mf">104.7</span><span class="p">,</span> <span class="n">cents</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&#39;A8-30&#39;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>midi <span class="classifier-delimiter">:</span> <span class="classifier">int or iterable of int</span></dt>
<dd><p class="first last">Midi numbers to convert.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>octave: bool</dt>
<dd><p class="first last">If True, include the octave number</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>cents: bool</dt>
<dd><p class="first last">If true, cent markers will be appended for fractional notes.
Eg, <tt class="docutils literal"><span class="pre">midi_to_note(69.3,</span> <span class="pre">cents=True)</span></tt> == <tt class="docutils literal"><span class="pre">A5+03</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>notes <span class="classifier-delimiter">:</span> <span class="classifier">str or iterable of str</span></dt>
<dd><p class="first last">Strings describing each midi note.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.midi_to_hz">
<tt class="descclassname">librosa.core.</tt><tt class="descname">midi_to_hz</tt><big>(</big><em>notes</em><big>)</big><a class="headerlink" href="#librosa.core.midi_to_hz" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the frequency (Hz) of MIDI note(s)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_hz</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<span class="go">array([ 65.40639133])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_hz</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">48</span><span class="p">))</span>
<span class="go">array([  65.40639133,   69.29565774,   73.41619198,   77.78174593,</span>
<span class="go">         82.40688923,   87.30705786,   92.49860568,   97.998859  ,</span>
<span class="go">        103.82617439,  110.        ,  116.54094038,  123.47082531])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>notes <span class="classifier-delimiter">:</span> <span class="classifier">int, np.ndarray</span></dt>
<dd><p class="first last">midi number(s) of the note(s)</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>frequency <span class="classifier-delimiter">:</span> <span class="classifier">float, np.ndarray</span></dt>
<dd><p class="first last">frequency (frequencies) of <tt class="docutils literal"><span class="pre">notes</span></tt> in Hz</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hz_to_midi">
<tt class="descclassname">librosa.core.</tt><tt class="descname">hz_to_midi</tt><big>(</big><em>frequencies</em><big>)</big><a class="headerlink" href="#librosa.core.hz_to_midi" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the closest MIDI note number(s) for given frequencies</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_midi</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="go">array([ 34.50637059])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_midi</span><span class="p">([</span><span class="mi">110</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">440</span><span class="p">])</span>
<span class="go">array([ 45.,  57.,  69.])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">float, np.ndarray</span></dt>
<dd><p class="first last">frequencies to convert</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>note_nums <span class="classifier-delimiter">:</span> <span class="classifier">int, np.ndarray</span></dt>
<dd><p class="first last">closest MIDI notes to <tt class="docutils literal"><span class="pre">frequencies</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hz_to_mel">
<tt class="descclassname">librosa.core.</tt><tt class="descname">hz_to_mel</tt><big>(</big><em>frequencies</em>, <em>htk=False</em><big>)</big><a class="headerlink" href="#librosa.core.hz_to_mel" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hz to Mels</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_mel</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="go">array([0.9])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_mel</span><span class="p">([</span><span class="mi">110</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">440</span><span class="p">])</span>
<span class="go">array([ 1.65,  3.3 ,  6.6 ])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, float</span></dt>
<dd><p class="first last">scalar or array of frequencies</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>htk <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">use HTK formula instead of Slaney</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>mels <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">input frequencies in Mels</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.mel_to_hz">
<tt class="descclassname">librosa.core.</tt><tt class="descname">mel_to_hz</tt><big>(</big><em>mels</em>, <em>htk=False</em><big>)</big><a class="headerlink" href="#librosa.core.mel_to_hz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert mel bin numbers to frequencies</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">mel_to_hz</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([ 200.])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">mel_to_hz</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="go">array([  66.66666667,  133.33333333,  200.        ,  266.66666667,</span>
<span class="go">        333.33333333])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>mels <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, float</span></dt>
<dd><p class="first last">mel bins to convert</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>htk <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">use HTK formula instead of Slaney</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">input mels in Hz</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hz_to_octs">
<tt class="descclassname">librosa.core.</tt><tt class="descname">hz_to_octs</tt><big>(</big><em>frequencies</em>, <em>A440=440.0</em><big>)</big><a class="headerlink" href="#librosa.core.hz_to_octs" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert frequencies (Hz) to (fractional) octave numbers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_octs</span><span class="p">(</span><span class="mf">440.0</span><span class="p">)</span>
<span class="go">array([ 4.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_octs</span><span class="p">([</span><span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">256</span><span class="p">])</span>
<span class="go">array([ 0.21864029,  1.21864029,  2.21864029,  3.21864029])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, float</span></dt>
<dd><p class="first last">scalar or vector of frequencies</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>A440 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">frequency of A440</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>octaves <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">octave number for each frequency</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.octs_to_hz">
<tt class="descclassname">librosa.core.</tt><tt class="descname">octs_to_hz</tt><big>(</big><em>octs</em>, <em>A440=440.0</em><big>)</big><a class="headerlink" href="#librosa.core.octs_to_hz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert octaves numbers to frequencies.</p>
<p>Octaves are counted relative to A.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">octs_to_hz</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([ 55.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">octs_to_hz</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">array([   6.875,   13.75 ,   27.5  ,   55.   ,  110.   ])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>octaves <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">octave number for each frequency</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>A440 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">frequency of A440</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, float</span></dt>
<dd><p class="first last">scalar or vector of frequencies</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.fft_frequencies">
<tt class="descclassname">librosa.core.</tt><tt class="descname">fft_frequencies</tt><big>(</big><em>sr=22050</em>, <em>n_fft=2048</em><big>)</big><a class="headerlink" href="#librosa.core.fft_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <tt class="docutils literal"><span class="pre">np.fft.fftfreqs</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">fft_frequencies</span><span class="p">(</span><span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="go">array([     0.   ,   1378.125,   2756.25 ,   4134.375,   5512.5  ,</span>
<span class="go">         6890.625,   8268.75 ,   9646.875,  11025.   ])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Audio sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">FFT window size</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>freqs <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape = (1 + n_fft/2,)</span></dt>
<dd><p class="first last">Frequencies (0, sr/n_fft, 2*sr/n_fft, ..., sr/2)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.cqt_frequencies">
<tt class="descclassname">librosa.core.</tt><tt class="descname">cqt_frequencies</tt><big>(</big><em>n_bins</em>, <em>fmin</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em><big>)</big><a class="headerlink" href="#librosa.core.cqt_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the center frequencies of Constant-Q bins.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get the CQT frequencies for 24 notes, starting at C2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">cqt_frequencies</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_hz</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s">&#39;C2&#39;</span><span class="p">)))</span>
<span class="go">array([  32.70319566,   34.64782887,   36.70809599,   38.89087297,</span>
<span class="go">         41.20344461,   43.65352893,   46.24930284,   48.9994295 ,</span>
<span class="go">         51.9130872 ,   55.        ,   58.27047019,   61.73541266,</span>
<span class="go">         65.40639133,   69.29565774,   73.41619198,   77.78174593,</span>
<span class="go">         82.40688923,   87.30705786,   92.49860568,   97.998859  ,</span>
<span class="go">        103.82617439,  110.        ,  116.54094038,  123.47082531])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>n_bins <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of constant-Q bins</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;0</span></dt>
<dd><p class="first last">Minimum frequency</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of bins per octave</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in [-0.5, +0.5)</span></dt>
<dd><p class="first last">Deviation from A440 tuning in fractional bins (cents)</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_bins,)</span></dt>
<dd><p class="first last">Center frequency for each CQT bin</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.mel_frequencies">
<tt class="descclassname">librosa.core.</tt><tt class="descname">mel_frequencies</tt><big>(</big><em>n_mels=128</em>, <em>fmin=0.0</em>, <em>fmax=11025.0</em>, <em>htk=False</em>, <em>extra=False</em><big>)</big><a class="headerlink" href="#librosa.core.mel_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the center frequencies of mel bands</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">mel_frequencies</span><span class="p">(</span><span class="n">n_mels</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="go">array([    0.        ,    81.15543818,   162.31087636,   243.46631454,</span>
<span class="go">        324.62175272,   405.7771909 ,   486.93262907,   568.08806725,</span>
<span class="go">        649.24350543,   730.39894361,   811.55438179,   892.70981997,</span>
<span class="go">        973.86525815,  1058.38224675,  1150.77458676,  1251.23239132,</span>
<span class="go">        1360.45974173,  1479.22218262,  1608.3520875 ,  1748.75449257,</span>
<span class="go">        1901.4134399 ,  2067.39887435,  2247.87414245,  2444.10414603,</span>
<span class="go">        2657.46420754,  2889.44970936,  3141.68657445,  3415.94266206,</span>
<span class="go">        3714.14015814,  4038.36904745,  4390.90176166,  4774.2091062 ,</span>
<span class="go">        5190.97757748,  5644.12819182,  6136.83695801,  6672.55713712,</span>
<span class="go">        7255.04344548,  7888.37837041,  8577.0007833 ,  9325.73705043])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>n_mels <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of Mel bins</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">minimum frequency (Hz)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">maximum frequency (Hz)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>htk <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">use HTK formula instead of Slaney</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>extra <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">include extra frequencies necessary for building Mel filters</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>bin_frequencies <span class="classifier-delimiter">:</span> <span class="classifier">ndarray</span></dt>
<dd><p class="first last">vector of Mel frequencies</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.A_weighting">
<tt class="descclassname">librosa.core.</tt><tt class="descname">A_weighting</tt><big>(</big><em>frequencies</em>, <em>min_db=-80.0</em><big>)</big><a class="headerlink" href="#librosa.core.A_weighting" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the A-weighting of a set of frequencies.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get the A-weighting for 20 Mel frequencies</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">mel_frequencies</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">A_weighting</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span>
<span class="go">array([-80.        , -13.35467911,  -6.59400464,  -3.57422971,</span>
<span class="go">        -1.87710933,  -0.83465455,  -0.15991521,   0.3164558 ,</span>
<span class="go">        0.68372258,   0.95279329,   1.13498903,   1.23933477,</span>
<span class="go">        1.27124465,   1.23163355,   1.1163366 ,   0.91575476,</span>
<span class="go">        0.6147545 ,   0.1929889 ,  -0.37407714,  -1.11314196])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">scalar or np.ndarray</span></dt>
<dd><p class="first last">One or more frequencies (in Hz)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>min_db <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first last">Clip weights below this threshold.
If <tt class="docutils literal"><span class="pre">None</span></tt>, no clipping is performed.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>A_weighting <span class="classifier-delimiter">:</span> <span class="classifier">scalar or np.ndarray</span></dt>
<dd><p class="first last">A[i] is the A-weighting of frequencies[i]</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.frames_to_time">
<tt class="descclassname">librosa.core.</tt><tt class="descname">frames_to_time</tt><big>(</big><em>frames</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>n_fft=None</em><big>)</big><a class="headerlink" href="#librosa.core.frames_to_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts frame counts to time (seconds)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beat_times</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">beats</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Time conversion with a framing correction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_env</span>    <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">1024</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onsets</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_detect</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">onset_env</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_times</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">onsets</span><span class="p">,</span> 
<span class="go">                                          sr=sr, </span>
<span class="go">                                          hop_length=64,</span>
<span class="go">                                          n_fft=1024)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">vector of frame numbers</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">audio sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples between successive frames</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">None or int &gt; 0</span></dt>
<dd><p class="first last">Optional: length of the FFT window.  
If given, time conversion will include an offset of <tt class="docutils literal"><span class="pre">n_fft</span> <span class="pre">/</span> <span class="pre">2</span></tt>
to counteract windowing effects in STFT.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray </span></dt>
<dd><p class="first last">time (in seconds) of each given frame number:
<tt class="docutils literal"><span class="pre">times[i]</span> <span class="pre">=</span> <span class="pre">frames[i]</span> <span class="pre">*</span> <span class="pre">hop_length</span> <span class="pre">/</span> <span class="pre">sr</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.time_to_frames">
<tt class="descclassname">librosa.core.</tt><tt class="descname">time_to_frames</tt><big>(</big><em>times</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>n_fft=None</em><big>)</big><a class="headerlink" href="#librosa.core.time_to_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts time stamps into STFT frames.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get the frame numbers for every 100ms</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">time_to_frames</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="go">array([ 0,  4,  8, 12, 17, 21, 25, 30, 34, 38])</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">vector of time stamps</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">audio sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">number of samples between successive frames</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">None or int &gt; 0</span></dt>
<dd><p class="first">Optional: length of the FFT window.  
If given, time conversion will include an offset of <tt class="docutils literal"><span class="pre">-</span> <span class="pre">n_fft</span> <span class="pre">/</span> <span class="pre">2</span></tt>
to counteract windowing effects in STFT.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This may result in negative frame indices.</p>
</div>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=int</span></dt>
<dd><p class="first last">Frame numbers corresponding to the given times:
<tt class="docutils literal"><span class="pre">frames[i]</span> <span class="pre">=</span> <span class="pre">floor(</span> <span class="pre">times[i]</span> <span class="pre">*</span> <span class="pre">sr</span> <span class="pre">/</span> <span class="pre">hop_length</span> <span class="pre">)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.autocorrelate">
<tt class="descclassname">librosa.core.</tt><tt class="descname">autocorrelate</tt><big>(</big><em>y</em>, <em>max_size=None</em><big>)</big><a class="headerlink" href="#librosa.core.autocorrelate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bounded auto-correlation</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Compute full autocorrelation of y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_ac</span>    <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">autocorrelate</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Compute autocorrelation up to 4 seconds lag</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_ac_4</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">autocorrelate</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">vector to autocorrelate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>max_size <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">maximum correlation lag.
If unspecified, defaults to <tt class="docutils literal"><span class="pre">len(y)</span></tt> (unbounded)</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>z <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">truncated autocorrelation <tt class="docutils literal"><span class="pre">y*y</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.localmax">
<tt class="descclassname">librosa.core.</tt><tt class="descname">localmax</tt><big>(</big><em>x</em><big>)</big><a class="headerlink" href="#librosa.core.localmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Return 1 where there are local maxima in x (column-wise)
left edges do not fire, right edges might.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">localmax</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="go">array([False, False, False,  True, False,  True, False, True], dtype=bool)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">input vector</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>m <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=bool</span></dt>
<dd><p class="first last">indicator vector of local maxima:
<tt class="docutils literal"><span class="pre">m[i]</span> <span class="pre">==</span> <span class="pre">True</span></tt> if <tt class="docutils literal"><span class="pre">x[i]</span></tt> is a local maximum</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.core.peak_pick">
<tt class="descclassname">librosa.core.</tt><tt class="descname">peak_pick</tt><big>(</big><em>x</em>, <em>pre_max</em>, <em>post_max</em>, <em>pre_avg</em>, <em>post_avg</em>, <em>delta</em>, <em>wait</em><big>)</big><a class="headerlink" href="#librosa.core.peak_pick" title="Permalink to this definition">¶</a></dt>
<dd><p>Uses a flexible heuristic to pick peaks in a signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Look +-3 steps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># compute the moving average over +-5 steps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># peaks must be &gt; avg + 0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># skip 10 steps before taking another peak</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">peak_pick</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">input signal to peak picks from</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>pre_max <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples before n over which max is computed</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>post_max <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples after n over which max is computed</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>pre_avg <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples before n over which mean is computed</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>post_avg <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples after n over which mean is computed</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delta <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">threshold offset for mean</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>wait <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples to wait after picking a peak</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>peaks <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=int</span></dt>
<dd><p class="first last">indices of peaks in x</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A sample n is selected as an peak if the corresponding x[n]
fulfills the following three conditions:</p>
<blockquote>
<div><ol class="arabic simple">
<li><tt class="docutils literal"><span class="pre">x[n]</span> <span class="pre">==</span> <span class="pre">max(x[n</span> <span class="pre">-</span> <span class="pre">pre_max:n</span> <span class="pre">+</span> <span class="pre">post_max])</span></tt></li>
<li><tt class="docutils literal"><span class="pre">x[n]</span> <span class="pre">&gt;=</span> <span class="pre">mean(x[n</span> <span class="pre">-</span> <span class="pre">pre_avg:n</span> <span class="pre">+</span> <span class="pre">post_avg])</span> <span class="pre">+</span> <span class="pre">delta</span></tt></li>
<li><tt class="docutils literal"><span class="pre">n</span> <span class="pre">-</span> <span class="pre">previous_n</span> <span class="pre">&gt;</span> <span class="pre">wait</span></tt></li>
</ol>
</div></blockquote>
<p class="last">where <tt class="docutils literal"><span class="pre">previous_n</span></tt> is the last sample picked as a peak (greedily).</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt>&#64;inproceedings{bock2012evaluating,</dt>
<dd>title={Evaluating the Online Capabilities of Onset Detection Methods.},
author={B{&#8220;o}ck, Sebastian and Krebs, Florian and Schedl, Markus},
booktitle={ISMIR},
pages={49&#8211;54},
year={2012}}</dd>
</dl>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Implementation based on 
<a class="reference external" href="https://github.com/CPJKU/onset_detection/blob/master/onset_program.py">https://github.com/CPJKU/onset_detection/blob/master/onset_program.py</a></p>
</div>
</dd></dl>

</div>
<div class="section" id="module-librosa.decompose">
<span id="spectrogram-decomposition"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Spectrogram</span> <span class="pre">decomposition</span></tt><a class="headerlink" href="#module-librosa.decompose" title="Permalink to this headline">¶</a></h2>
<p>Spectrogram decomposition</p>
<dl class="function">
<dt id="librosa.decompose.decompose">
<tt class="descclassname">librosa.decompose.</tt><tt class="descname">decompose</tt><big>(</big><em>S</em>, <em>n_components=None</em>, <em>transformer=None</em><big>)</big><a class="headerlink" href="#librosa.decompose.decompose" title="Permalink to this definition">¶</a></dt>
<dd><p>Decompose a feature matrix.</p>
<p>By default, this is done with with non-negative matrix factorization,
but any <tt class="docutils literal"><span class="pre">sklearn.decomposition</span></tt>-type object will work.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Decompose a magnitude spectrogram into 32 components with NMF</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">components</span><span class="p">,</span> <span class="n">activations</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">decompose</span><span class="o">.</span><span class="n">decompose</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">n_components</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or with sparse dictionary learning</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">T</span> <span class="o">=</span> <span class="n">sklearn</span><span class="o">.</span><span class="n">decomposition</span><span class="o">.</span><span class="n">DictionaryLearning</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">components</span><span class="p">,</span> <span class="n">activations</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">decompose</span><span class="o">.</span><span class="n">decompose</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">transformer</span><span class="o">=</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_features, n_samples)</span></dt>
<dd><p class="first last">feature matrix</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_components <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 or None</span></dt>
<dd><p class="first last">number of desired components
if None, then <tt class="docutils literal"><span class="pre">n_features</span></tt> components are used</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>transformer <span class="classifier-delimiter">:</span> <span class="classifier">None or object</span></dt>
<dd><p class="first">If None, use <tt class="docutils literal"><span class="pre">sklearn.decomposition.NMF</span></tt></p>
<p>Otherwise, any object with a similar interface to NMF should work.
<tt class="docutils literal"><span class="pre">transformer</span></tt> must follow the scikit-learn convention, where input data
is (n_samples, n_features).</p>
<p><tt class="docutils literal"><span class="pre">transformer.fit_transform()</span></tt> will be run on <tt class="docutils literal"><span class="pre">S.T</span></tt> (not <tt class="docutils literal"><span class="pre">S</span></tt>),
the return value of which is stored (transposed) as <tt class="docutils literal"><span class="pre">activations</span></tt>.</p>
<p>The components will be retrieved as <tt class="docutils literal"><span class="pre">transformer.components_.T</span></tt></p>
<p><tt class="docutils literal"><span class="pre">S</span> <span class="pre">~=</span> <span class="pre">np.dot(activations,</span> <span class="pre">transformer.components_).T</span></tt></p>
<p class="last">or equivalently:
<tt class="docutils literal"><span class="pre">S</span> <span class="pre">~=</span> <span class="pre">np.dot(transformer.components_.T,</span> <span class="pre">activations.T)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>components: np.ndarray, shape=(n_features, n_components)</dt>
<dd><p class="first last">dictionary matrix</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>activations: np.ndarray, shape=(n_components, n_samples)</dt>
<dd><p class="first last">transformed matrix/activation matrix</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.decompose.hpss">
<tt class="descclassname">librosa.decompose.</tt><tt class="descname">hpss</tt><big>(</big><em>S</em>, <em>kernel_size=31</em>, <em>power=2.0</em>, <em>mask=False</em><big>)</big><a class="headerlink" href="#librosa.decompose.hpss" title="Permalink to this definition">¶</a></dt>
<dd><p>Median-filtering harmonic percussive separation</p>
<p>Decomposes an input spectrogram <tt class="docutils literal"><span class="pre">S</span> <span class="pre">=</span> <span class="pre">H</span> <span class="pre">+</span> <span class="pre">P</span></tt>
where <tt class="docutils literal"><span class="pre">H</span></tt> contains the harmonic components, 
and <tt class="docutils literal"><span class="pre">P</span></tt> contains the percussive components.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">,</span> <span class="n">P</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">decompose</span><span class="o">.</span><span class="n">hpss</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_harmonic</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">H</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or with a narrower horizontal filter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H</span><span class="p">,</span> <span class="n">P</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">decompose</span><span class="o">.</span><span class="n">hpss</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">kernel_size</span><span class="o">=</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="mi">31</span><span class="p">))</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">input spectrogram. May be real (magnitude) or complex.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kernel_size <span class="classifier-delimiter">:</span> <span class="classifier">int or tuple (kernel_harmonic, kernel_percussive)</span></dt>
<dd><p class="first last">kernel size for the median filters.
If scalar, the same size is used for both harmonic and percussive.
If array_like, the first value specifies the width of the harmonic filter,
and the second value specifies the width of the percussive filter.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>power <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Exponent for the Wiener filter</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>mask <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Return the masking matrices instead of components</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>harmonic <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">harmonic component (or mask)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>percussive <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">percussive component (or mask)</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">harmonic + percussive = S</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt>&#64;article{fitzgerald2010harmonic,</dt>
<dd>title={Harmonic/percussive separation using median filtering},
author={Fitzgerald, Derry},
year={2010},
publisher={Dublin Institute of Technology}}</dd>
</dl>
</div>
</dd></dl>

</div>
<div class="section" id="module-librosa.display">
<span id="display"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Display</span></tt><a class="headerlink" href="#module-librosa.display" title="Permalink to this headline">¶</a></h2>
<p>Display module for interacting with matplotlib</p>
<dl class="function">
<dt id="librosa.display.time_ticks">
<tt class="descclassname">librosa.display.</tt><tt class="descname">time_ticks</tt><big>(</big><em>locs</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.display.time_ticks" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot time-formatted axis ticks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Tick at pre-computed beat times</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">time_ticks</span><span class="p">(</span><span class="n">beat_times</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Set the locations of the time stamps</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">time_ticks</span><span class="p">(</span><span class="n">locations</span><span class="p">,</span> <span class="n">timestamps</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Format in seconds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">time_ticks</span><span class="p">(</span><span class="n">beat_times</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s">&#39;s&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Tick along the y axis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">time_ticks</span><span class="p">(</span><span class="n">beat_times</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>locations <span class="classifier-delimiter">:</span> <span class="classifier">array </span></dt>
<dd><p class="first last">Time-stamps for tick marks</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_ticks <span class="classifier-delimiter">:</span> <span class="classifier">int or None</span></dt>
<dd><p class="first last">Show this number of ticks (evenly spaced).
If none, all ticks are displayed.
Default: 5</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">&#8216;x&#8217; or &#8216;y&#8217;</span></dt>
<dd><p class="first last">Which axis should the ticks be plotted on?
Default: &#8216;x&#8217;</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmt <span class="classifier-delimiter">:</span> <span class="classifier">None or {&#8216;ms&#8217;, &#8216;s&#8217;, &#8216;m&#8217;, &#8216;h&#8217;}</span></dt>
<dd><p class="first">ms: milliseconds   (eg, 241ms)
s: seconds         (eg, 1.43s)
m: minutes         (eg, 1:02)
h: hours           (eg, 1:02:03)</p>
<p>If none, formatted is automatically selected by the 
range of the times data.</p>
<p class="last">Default: None</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd><p class="first last">See <cite>matplotlib.pyplot.xticks</cite> or <cite>yticks</cite> for details.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>See <cite>matplotlib.pyplot.xticks</cite> or <cite>yticks</cite> for details.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.display.cmap">
<tt class="descclassname">librosa.display.</tt><tt class="descname">cmap</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#librosa.display.cmap" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a default colormap from the given data.</p>
<p>If the data is boolean, use a black and white colormap.</p>
<p>If the data has both positive and negative values, use a diverging colormap.</p>
<p>Otherwise, use a sequential map.</p>
<p>PuOr and OrRd are chosen to optimize visibility for color-blind people.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">cmap</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">&#39;OrRd&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">cmap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">))</span>
<span class="go">&#39;BuPu_r&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">cmap</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="go">&#39;PuOr_r&#39;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">Input data</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>cmap_str</dt>
<dd><ul class="first last simple">
<li>If data is type=boolean, cmap_Str is &#8216;gray_r&#8217;</li>
<li>If data has only positive values, cmap_str is &#8216;OrRd&#8217;</li>
<li>If data has only negative values, cmap_str is &#8216;BuPu_r&#8217;</li>
<li>If data has both positive and negatives, cmap_str is &#8216;PuOr_r&#8217;</li>
</ul>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.display.specshow">
<tt class="descclassname">librosa.display.</tt><tt class="descname">specshow</tt><big>(</big><em>data</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>x_axis=None</em>, <em>y_axis=None</em>, <em>n_xticks=5</em>, <em>n_yticks=5</em>, <em>fmin=None</em>, <em>fmax=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.display.specshow" title="Permalink to this definition">¶</a></dt>
<dd><p>Display a spectrogram/chromagram/cqt/etc.</p>
<p>Functions as a drop-in replacement for <tt class="docutils literal"><span class="pre">matplotlib.pyplot.imshow</span></tt>, but with useful defaults.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Visualize an STFT with linear frequency scaling</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s">&#39;linear&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or with logarithmic frequency scaling</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s">&#39;log&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Visualize a CQT with note markers</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CQT</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">880</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">CQT</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s">&#39;cqt_note&#39;</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">880</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Draw time markers automatically</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s">&#39;time&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Draw a chromagram with pitch classes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chromagram</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s">&#39;chroma&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Force a grayscale colormap (white -&gt; black)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">logamplitude</span><span class="p">(</span><span class="n">D</span><span class="p">),</span> <span class="n">cmap</span><span class="o">=</span><span class="s">&#39;gray_r&#39;</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">Matrix to display (eg, spectrogram)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Sample rate. Used to determine time scale in x-axis</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Hop length. Also used to determine time scale in x-axis</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>x_axis <span class="classifier-delimiter">:</span> <span class="classifier">None or {&#8216;time&#8217;, &#8216;frames&#8217;, &#8216;off&#8217;}</span></dt>
<dd><p class="first last">If None or &#8216;off&#8217;, no x axis is displayed.
If &#8216;time&#8217;, markers are shown as milliseconds, seconds, minutes, or hours.
(See <tt class="docutils literal"><span class="pre">time_ticks()</span></tt> for details.)
If &#8216;frames&#8217;, markers are shown as frame counts.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>y_axis <span class="classifier-delimiter">:</span> <span class="classifier">None or {&#8216;linear&#8217;, &#8216;mel&#8217;, &#8216;cqt_hz&#8217;, &#8216;cqt_note&#8217;, &#8216;chroma&#8217;, &#8216;off&#8217;}</span></dt>
<dd><ul class="first last simple">
<li>None or &#8216;off&#8217;: no y axis is displayed.</li>
<li>&#8216;linear&#8217;: frequency range is determined by the FFT window and sampling rate.</li>
<li>&#8216;log&#8217;: the image is displayed on a vertical log scale.</li>
<li>&#8216;mel&#8217;: frequencies are determined by the mel scale.</li>
<li>&#8216;cqt_hz&#8217;: frequencies are determined by the fmin and fmax values.</li>
<li>&#8216;cqt_note&#8217;: pitches are determined by the fmin and fmax values.</li>
<li>&#8216;chroma&#8217;: pitches are determined by the chroma filters.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_xticks <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">If x_axis is drawn, the number of ticks to show</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_yticks <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">If y_axis is drawn, the number of ticks to show</p>
</dd>
</dl>
</li>
<li><p class="first">fmin : float &gt; 0 or None</p>
</li>
<li><dl class="first docutils">
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 or None</span></dt>
<dd><p class="first last">Used for setting the Mel or constantq frequency scales</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs </dt>
<dd><p class="first last">Additional keyword arguments passed through to <tt class="docutils literal"><span class="pre">matplotlib.pyplot.imshow</span></tt>.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>image <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">matplotlib.image.AxesImage</span></tt></span></dt>
<dd><p class="first last">As returned from <tt class="docutils literal"><span class="pre">matplotlib.pyplot.imshow</span></tt>.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError </dt>
<dd><p class="first last">If y_axis is &#8216;cqt_hz&#8217; or &#8216;cqt_note&#8217; and fmin and fmax are not supplied.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-librosa.feature">
<span id="feature-extraction"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Feature</span> <span class="pre">extraction</span></tt><a class="headerlink" href="#module-librosa.feature" title="Permalink to this headline">¶</a></h2>
<p>Feature extraction routines.</p>
<dl class="function">
<dt id="librosa.feature.logfsgram">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">logfsgram</tt><big>(</big><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=4096</em>, <em>hop_length=512</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.feature.logfsgram" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a log-frequency spectrogram (piano roll) using a fixed-window STFT.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># From time-series input</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S_log</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">logfsgram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Or from spectrogram input</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span>           <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S_log</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">logfsgram</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Convert to chroma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_map</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">cq_to_chroma</span><span class="p">(</span><span class="n">S_log</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span>           <span class="o">=</span> <span class="n">chroma_map</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">S_log</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">audio sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">optional power spectrogram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">FFT window size</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">hop length for STFT. See <tt class="docutils literal"><span class="pre">librosa.stft</span></tt> for details.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of bins per octave. 
Defaults to 12.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in [-0.5,  0.5)</span></dt>
<dd><p class="first last">Deviation (in fractions of a bin) from A440 tuning.
If not provided, it will be automatically estimated from <tt class="docutils literal"><span class="pre">y</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional arguments</span></dt>
<dd><p class="first last">See <tt class="docutils literal"><span class="pre">librosa.filters.logfrequency()</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>P <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape = (n_pitches, t)</span></dt>
<dd><p class="first last">P(f, t) contains the energy at pitch bin f, frame t.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of either <tt class="docutils literal"><span class="pre">S</span></tt> or <tt class="docutils literal"><span class="pre">y</span></tt> must be provided.
If <tt class="docutils literal"><span class="pre">y</span></tt> is provided, the power spectrogram is computed automatically given
the parameters <tt class="docutils literal"><span class="pre">n_fft</span></tt> and <tt class="docutils literal"><span class="pre">hop_length</span></tt>.
If <tt class="docutils literal"><span class="pre">S</span></tt> is provided, it is used as the input spectrogram, and <tt class="docutils literal"><span class="pre">n_fft</span></tt> is inferred
from its shape.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.chromagram">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">chromagram</tt><big>(</big><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>norm=inf</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>tuning=0.0</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.feature.chromagram" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a chromagram from a spectrogram or waveform</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">chromagram</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use a pre-computed spectrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">4096</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">chromagram</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">sampling rate of y</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">spectrogram (STFT power)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first last">column-wise normalization. See
<tt class="docutils literal"><span class="pre">librosa.util.normalize</span></tt> for details.
If <cite>None</cite>, no normalization is performed.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int  &gt; 0</span></dt>
<dd><p class="first last">FFT window size if provided <tt class="docutils literal"><span class="pre">y,</span> <span class="pre">sr</span></tt> instead of <tt class="docutils literal"><span class="pre">S</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">hop length if provided <tt class="docutils literal"><span class="pre">y,</span> <span class="pre">sr</span></tt> instead of <tt class="docutils literal"><span class="pre">S</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in [-0.5, 0.5)</span></dt>
<dd><p class="first last">Deviation from A440 tuning in fractional bins (cents)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs</dt>
<dd><p class="first last">Parameters to build the chroma filterbank.
See <tt class="docutils literal"><span class="pre">librosa.filters.chroma()</span></tt> for details.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of either <tt class="docutils literal"><span class="pre">S</span></tt> or <tt class="docutils literal"><span class="pre">y</span></tt> must be provided.
If y is provided, the magnitude spectrogram is computed automatically given
the parameters <tt class="docutils literal"><span class="pre">n_fft</span></tt> and <tt class="docutils literal"><span class="pre">hop_length</span></tt>.
If S is provided, it is used as the input spectrogram, and n_fft is inferred
from its shape.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>chromagram <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">Normalized energy for each chroma bin at each frame.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError </dt>
<dd><p class="first last">if an improper value is supplied for norm</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.perceptual_weighting">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">perceptual_weighting</tt><big>(</big><em>S</em>, <em>frequencies</em>, <em>ref_power=1e-12</em><big>)</big><a class="headerlink" href="#librosa.feature.perceptual_weighting" title="Permalink to this definition">¶</a></dt>
<dd><p>Perceptual weighting of a power spectrogram:</p>
<p><tt class="docutils literal"><span class="pre">S_p[f]</span> <span class="pre">=</span> <span class="pre">A_weighting(f)</span> <span class="pre">+</span> <span class="pre">10*log(S[f]</span> <span class="pre">/</span> <span class="pre">ref_power)</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Re-weight a CQT representation, using peak power as reference</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CQT</span>             <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">440</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span>           <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt_frequencies</span><span class="p">(</span><span class="n">CQT</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">fmin</span><span class="o">=</span><span class="mi">55</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">percept_CQT</span>     <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">perceptual_weighting</span><span class="p">(</span><span class="n">CQT</span><span class="p">,</span> <span class="n">freqs</span><span class="p">,</span> 
<span class="go">                                                            ref_power=CQT.max())</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(d,t)</span></dt>
<dd><p class="first last">Power spectrogram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(d,)</span></dt>
<dd><p class="first last">Center frequency for each row of <tt class="docutils literal"><span class="pre">S</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ref_power <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Reference power</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>S_p <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(d,t)</span></dt>
<dd><p class="first last">perceptually weighted version of <tt class="docutils literal"><span class="pre">S</span></tt>, in dB relative to <tt class="docutils literal"><span class="pre">ref_power</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.estimate_tuning">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">estimate_tuning</tt><big>(</big><em>frequencies</em>, <em>resolution=0.01</em>, <em>bins_per_octave=12</em><big>)</big><a class="headerlink" href="#librosa.feature.estimate_tuning" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a collection of pitches, estimate its tuning offset
(in fractions of a bin) relative to A440=440.0Hz.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Generate notes at +25 cents</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt_frequencies</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="n">tuning</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">estimate_tuning</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span>
<span class="go">0.25</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Track frequencies from a real spectrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span><span class="p">,</span> <span class="n">magnitudes</span><span class="p">,</span> <span class="n">stft</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">ifptrack</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Select out pitches with high energy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span> <span class="o">=</span> <span class="n">pitches</span><span class="p">[</span><span class="n">magnitudes</span> <span class="o">&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">magnitudes</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">estimate_tuning</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">array-like, float</span></dt>
<dd><p class="first last">A collection of frequencies detected in the signal.
See <tt class="docutils literal"><span class="pre">ifptrack</span></tt>.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>resolution <span class="classifier-delimiter">:</span> <span class="classifier">float in (0, 1)</span></dt>
<dd><p class="first last">Resolution of the tuning as a fraction of a bin.
0.01 corresponds to cents.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">How many frequency bins per octave</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>tuning: float in [-0.5, 0.5]</dt>
<dd><p class="first last">estimated tuning deviation (fractions of a bin)</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.ifptrack">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">ifptrack</tt><big>(</big><em>y</em>, <em>sr=22050</em>, <em>n_fft=4096</em>, <em>hop_length=None</em>, <em>fmin=None</em>, <em>fmax=None</em>, <em>threshold=0.75</em><big>)</big><a class="headerlink" href="#librosa.feature.ifptrack" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantaneous pitch frequency tracking.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span><span class="p">,</span> <span class="n">magnitudes</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">ifptrack</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y: np.ndarray</dt>
<dd><p class="first last">audio signal</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">audio sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft: int</dt>
<dd><p class="first last">FFT window size</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Hop size for STFT.  Defaults to <tt class="docutils literal"><span class="pre">n_fft</span> <span class="pre">/</span> <span class="pre">4</span></tt>.
See <tt class="docutils literal"><span class="pre">librosa.stft()</span></tt> for details.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>threshold <span class="classifier-delimiter">:</span> <span class="classifier">float in (0, 1)</span></dt>
<dd><p class="first last">Maximum fraction of expected frequency increment to tolerate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float or tuple of float</span></dt>
<dd><p class="first last">Ramp parameter for lower frequency cutoff.
If scalar, the ramp has 0 width.
If tuple, a linear ramp is applied from <tt class="docutils literal"><span class="pre">fmin[0]</span></tt> to <tt class="docutils literal"><span class="pre">fmin[1]</span></tt>
Default: (150.0, 300.0)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float or tuple of float</span></dt>
<dd><p class="first last">Ramp parameter for upper frequency cutoff.
If scalar, the ramp has 0 width.
If tuple, a linear ramp is applied from <tt class="docutils literal"><span class="pre">fmax[0]</span></tt> to <tt class="docutils literal"><span class="pre">fmax[1]</span></tt>
Default: (2000.0, 4000.0)</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><p class="first">pitches : np.ndarray, shape=(d,t)</p>
</li>
<li><dl class="first docutils">
<dt>magnitudes <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(d,t)</span></dt>
<dd><p class="first">Where <tt class="docutils literal"><span class="pre">d</span></tt> is the subset of FFT bins within <tt class="docutils literal"><span class="pre">fmin</span></tt> and <tt class="docutils literal"><span class="pre">fmax</span></tt>.</p>
<p class="last"><tt class="docutils literal"><span class="pre">pitches[i,</span> <span class="pre">t]</span></tt> contains instantaneous frequencies at time <tt class="docutils literal"><span class="pre">t</span></tt>
<tt class="docutils literal"><span class="pre">magnitudes[i,</span> <span class="pre">t]</span></tt> contains their magnitudes.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, dtype=complex</span></dt>
<dd><p class="first last">STFT matrix</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.mfcc">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">mfcc</tt><big>(</big><em>S=None</em>, <em>y=None</em>, <em>sr=22050</em>, <em>n_mfcc=20</em><big>)</big><a class="headerlink" href="#librosa.feature.mfcc" title="Permalink to this definition">¶</a></dt>
<dd><p>Mel-frequency cepstral coefficients</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Generate mfccs from a time series</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfccs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use a pre-computed log-power Mel spectrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mels</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfccs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">logamplitude</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get more components</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfccs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">log-power Mel spectrogram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">sampling rate of y</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_mfcc: int</dt>
<dd><p class="first last">number of MFCCs to return</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of <tt class="docutils literal"><span class="pre">S</span></tt> or <tt class="docutils literal"><span class="pre">y,</span> <span class="pre">sr</span></tt> must be provided.
If <tt class="docutils literal"><span class="pre">S</span></tt> is not given, it is computed from <tt class="docutils literal"><span class="pre">y,</span> <span class="pre">sr</span></tt> using
the default parameters of <tt class="docutils literal"><span class="pre">melspectrogram</span></tt>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul>
<li><dl class="first docutils">
<dt>M <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_mfcc, S.shape[1])</span></dt>
<dd>MFCC sequence</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.melspectrogram">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">melspectrogram</tt><big>(</big><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.feature.melspectrogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a Mel-scaled power spectrogram.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Using a pre-computed power spectrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">D</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Passing through arguments to the Mel filters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mels</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">audio time-series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">sampling rate of y</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">magnitude or power spectrogram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">length of the FFT window</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples between successive frames.
See <tt class="docutils literal"><span class="pre">librosa.stft()</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs</dt>
<dd><p class="first last">Mel filterbank parameters
See librosa.filters.mel() documentation for details.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of either <tt class="docutils literal"><span class="pre">S</span></tt> or <tt class="docutils literal"><span class="pre">y,</span> <span class="pre">sr</span></tt> must be provided.
If the pair y, sr is provided, the power spectrogram is computed.
If S is provided, it is used as the spectrogram, and the parameters <tt class="docutils literal"><span class="pre">y,</span> <span class="pre">n_fft,</span>
<span class="pre">hop_length</span></tt> are ignored.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><ul>
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Mel power spectrogram</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.delta">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">delta</tt><big>(</big><em>data</em>, <em>axis=-1</em>, <em>order=1</em>, <em>pad=True</em><big>)</big><a class="headerlink" href="#librosa.feature.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute delta features.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Compute MFCC deltas, delta-deltas</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfccs</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta_mfcc</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">delta</span><span class="p">(</span><span class="n">mfccs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">delta2_mfcc</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">delta</span><span class="p">(</span><span class="n">mfccs</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(d, T)</span></dt>
<dd><p class="first last">the input data matrix (eg, spectrogram)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the axis along which to compute deltas.
Default is -1 (columns).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>order <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">the order of the difference operator.
1 for first derivative, 2 for second, etc.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>pad <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">set to True to pad the output matrix to the original size.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>delta_data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">delta matrix of <tt class="docutils literal"><span class="pre">data</span></tt>.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.sync">
<tt class="descclassname">librosa.feature.</tt><tt class="descname">sync</tt><big>(</big><em>data</em>, <em>frames</em>, <em>aggregate=None</em><big>)</big><a class="headerlink" href="#librosa.feature.sync" title="Permalink to this definition">¶</a></dt>
<dd><p>Synchronous aggregation of a feature matrix</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Beat-synchronous MFCCs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span>    <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span>               <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc</span>            <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_sync</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">sync</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">beats</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use median-aggregation instead of mean</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_sync</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">sync</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">beats</span><span class="p">,</span> <span class="n">aggregate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Or max aggregation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_sync</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">sync</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">beats</span><span class="p">,</span> <span class="n">aggregate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(d, T)</span></dt>
<dd><p class="first last">matrix of features</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">ordered array of frame segment boundaries</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>aggregate <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">aggregation function (defualt: np.mean)</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>Y <span class="classifier-delimiter">:</span> <span class="classifier">ndarray </span></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">Y[:,</span> <span class="pre">i]</span> <span class="pre">=</span> <span class="pre">aggregate(data[:,</span> <span class="pre">F[i-1]:F[i]],</span> <span class="pre">axis=1)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In order to ensure total coverage, boundary points are added to frames</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If synchronizing a feature matrix against beat tracker output, ensure
that the frame numbers are properly aligned and use the same hop_length.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-librosa.filters">
<span id="filter-banks"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Filter</span> <span class="pre">banks</span></tt><a class="headerlink" href="#module-librosa.filters" title="Permalink to this headline">¶</a></h2>
<p>Commonly used filter banks: DCT, Chroma, Mel, CQT</p>
<dl class="function">
<dt id="librosa.filters.dct">
<tt class="descclassname">librosa.filters.</tt><tt class="descname">dct</tt><big>(</big><em>n_filts</em>, <em>n_input</em><big>)</big><a class="headerlink" href="#librosa.filters.dct" title="Permalink to this definition">¶</a></dt>
<dd><p>Discrete cosine transform basis</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Compute MFCCs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span>           <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dct_filters</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">dct</span><span class="p">(</span><span class="mi">13</span><span class="p">,</span> <span class="n">S</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc</span>        <span class="o">=</span> <span class="n">dct_filters</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">logamplitude</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>n_filts <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of output components</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_input <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of input components</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_filts, n_input)</span></dt>
<dd><p class="first last">DCT basis vectors</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.filters.mel">
<tt class="descclassname">librosa.filters.</tt><tt class="descname">mel</tt><big>(</big><em>sr</em>, <em>n_fft</em>, <em>n_mels=128</em>, <em>fmin=0.0</em>, <em>fmax=None</em>, <em>htk=False</em><big>)</big><a class="headerlink" href="#librosa.filters.mel" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Filterbank matrix to combine FFT bins into Mel-frequency bins</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mel_fb</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">mel</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">2048</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or clip the maximum frequency to 8KHz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mel_fb</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">mel</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">2048</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">sampling rate of the incoming signal</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of FFT components</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_mels <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of Mel bands</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">lowest frequency (in Hz)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">highest frequency (in Hz)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>htk <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">use HTK formula instead of Slaney</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>M <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_mels, 1+ n_fft/2)</span></dt>
<dd><p class="first last">Mel transform matrix</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.filters.chroma">
<tt class="descclassname">librosa.filters.</tt><tt class="descname">chroma</tt><big>(</big><em>sr</em>, <em>n_fft</em>, <em>n_chroma=12</em>, <em>A440=440.0</em>, <em>ctroct=5.0</em>, <em>octwidth=2</em><big>)</big><a class="headerlink" href="#librosa.filters.chroma" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Filterbank matrix to convert STFT to chroma</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Build a simple chroma filter bank</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_fb</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">chroma</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">4096</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use quarter-tones instead of semitones</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_fbq</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">chroma</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="n">n_chroma</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Equally weight all octaves</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_fb</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">chroma</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="n">octwidth</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">audio sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">FFT window size</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_chroma <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of chroma bins</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>A440 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">Reference frequency for A440</p>
</dd>
</dl>
</li>
<li><p class="first">ctroct    : float</p>
</li>
<li><dl class="first docutils">
<dt>octwidth <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first last">These parameters specify a dominance window - Gaussian
weighting centered on <cite>ctroct</cite> (in octs, re A0 = 27.5Hz) and
with a gaussian half-width of <cite>octwidth</cite>.  
Set <cite>octwidth</cite> to <cite>None</cite> to use a flat weighting.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>wts <span class="classifier-delimiter">:</span> <span class="classifier">ndarray, shape=(n_chroma, 1 + n_fft / 2) </span></dt>
<dd><p class="first last">Chroma filter matrix</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.filters.logfrequency">
<tt class="descclassname">librosa.filters.</tt><tt class="descname">logfrequency</tt><big>(</big><em>sr</em>, <em>n_fft</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em>, <em>fmin=None</em>, <em>fmax=None</em>, <em>spread=0.125</em><big>)</big><a class="headerlink" href="#librosa.filters.logfrequency" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate a constant-Q filterbank for a fixed-window STFT.</p>
<p>Each filter is a log-normal window centered at the corresponding pitch frequency.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Simple log frequency filters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logfs_fb</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">logfrequency</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">4096</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use a narrower frequency range</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logfs_fb</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">logfrequency</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="mi">110</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">880</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use narrower filters for sparser response: 5% of a semitone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logfs_fb</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">logfrequency</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="n">spread</span><span class="o">=</span><span class="mf">0.05</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Or wider: 50% of a semitone</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">logfs_fb</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">logfrequency</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="mi">4096</span><span class="p">,</span> <span class="n">spread</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">audio sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">FFT window size</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of bins per octave. Defaults to 12 (semitones).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">None or float in [-0.5, +0.5]</span></dt>
<dd><p class="first last">Tuning correction parameter, in fractions of a bin.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Minimum frequency bin. Defaults to <tt class="docutils literal"><span class="pre">C1</span> <span class="pre">~=</span> <span class="pre">16.35</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Maximum frequency bin. Defaults to <tt class="docutils literal"><span class="pre">C9</span> <span class="pre">=</span> <span class="pre">4816.01</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>spread <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Spread of each filter, as a fraction of a bin.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>C <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(ceil(log(fmax/fmin)) * bins_per_octave, 1 + n_fft/2)</span></dt>
<dd><p class="first last">CQT filter bank.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.filters.constant_q">
<tt class="descclassname">librosa.filters.</tt><tt class="descname">constant_q</tt><big>(</big><em>sr</em>, <em>fmin=None</em>, <em>fmax=None</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em>, <em>window=None</em>, <em>resolution=2</em>, <em>pad=False</em><big>)</big><a class="headerlink" href="#librosa.filters.constant_q" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a constant-Q basis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get the CQT basis for C1 to C9, standard tuning</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basis</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">constant_q</span><span class="p">(</span><span class="mi">22050</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CQT</span>     <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">basis</span><span class="o">=</span><span class="n">basis</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Change the windowing function to Hanning instead of Hamming</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basis</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">constant_q</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">hanning</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use a longer window for each filter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">basis</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">constant_q</span><span class="p">(</span><span class="mi">22050</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Audio sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Minimum frequency bin. Defaults to <tt class="docutils literal"><span class="pre">C1</span> <span class="pre">~=</span> <span class="pre">16.35</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Maximum frequency bin. Defaults to <tt class="docutils literal"><span class="pre">C9</span> <span class="pre">=</span> <span class="pre">4816.01</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of bins per octave</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in [-0.5, +0.5)</span></dt>
<dd><p class="first last">Tuning deviation from A440 in fractions of a bin</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">function or None</span></dt>
<dd><p class="first last">Windowing function to apply to filters. 
If None, no window is applied.
Default: np.hamming</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>resolution <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd><p class="first last">Resolution of filter windows. Larger values use longer windows.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>pad <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first last">Zero-pad all filters to have a constant width (equal to the longest filter).</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt>&#64;phdthesis{mcvicar2013,</dt>
<dd><p class="first last">title  = {A machine learning approach to automatic chord extraction},
author = {McVicar, M.},
year   = {2013},
school = {University of Bristol}}</p>
</dd>
</dl>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>filters <span class="classifier-delimiter">:</span> <span class="classifier">list of np.ndarray</span></dt>
<dd><p class="first last">filters[i] is the time-domain representation of the i&#8217;th CQT basis.</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.filters.cq_to_chroma">
<tt class="descclassname">librosa.filters.</tt><tt class="descname">cq_to_chroma</tt><big>(</big><em>n_input</em>, <em>bins_per_octave=12</em>, <em>n_chroma=12</em>, <em>roll=0</em><big>)</big><a class="headerlink" href="#librosa.filters.cq_to_chroma" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a Constant-Q basis to Chroma.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get a CQT, and wrap bins to chroma</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CQT</span>         <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_map</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">filters</span><span class="o">.</span><span class="n">cq_to_chroma</span><span class="p">(</span><span class="n">CQT</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chromagram</span>  <span class="o">=</span> <span class="n">chroma_map</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">CQT</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>n_input <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of input components (CQT bins)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">How many bins per octave in the CQT</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_chroma <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">Number of output bins (per octave) in the chroma</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>roll <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">Number of bins to offset the output by.
For example, if the 0-bin of the CQT is C, and
the desired 0-bin for the chroma is A, then roll=-3.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>cq_to_chroma <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(n_chroma, n_input)</span></dt>
<dd><p class="first last">Transformation matrix: <tt class="docutils literal"><span class="pre">Chroma</span> <span class="pre">=</span> <span class="pre">np.dot(cq_to_chroma,</span> <span class="pre">CQT)</span></tt></p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError</dt>
<dd><p class="first last">If n_input is not an integer multiple of n_chroma</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-librosa.onset">
<span id="onset-detection"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Onset</span> <span class="pre">detection</span></tt><a class="headerlink" href="#module-librosa.onset" title="Permalink to this headline">¶</a></h2>
<p>Onset detection</p>
<dl class="function">
<dt id="librosa.onset.onset_detect">
<tt class="descclassname">librosa.onset.</tt><tt class="descname">onset_detect</tt><big>(</big><em>y=None</em>, <em>sr=22050</em>, <em>onset_envelope=None</em>, <em>hop_length=64</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.onset.onset_detect" title="Permalink to this definition">¶</a></dt>
<dd><p>Basic onset detector.  Locate note onset events by picking peaks in an
onset strength envelope.</p>
<p>See also: <tt class="docutils literal"><span class="pre">librosa.onset.onset_strength()</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get onset times from a signal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_frames</span>    <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_detect</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_times</span>     <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">onset_frames</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or use a pre-computed onset envelope</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onsets</span>          <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_frames</span>    <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_detect</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">onsets</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>onset_envelope <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">(optional) pre-computed onset stength envelope</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">hop length (in samples)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs  </dt>
<dd><p class="first">Parameters for peak picking</p>
<p class="last">See <tt class="docutils literal"><span class="pre">librosa.core.peak_pick()</span></tt> for details</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">One of either <tt class="docutils literal"><span class="pre">onset_envelope</span></tt> or <tt class="docutils literal"><span class="pre">y</span></tt> must be provided.</p>
</div>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>onsets <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">estimated frame numbers of onsets</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError</dt>
<dd><p class="first last">if neither y nor onsets are provided</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If no onset strength could be detected, onset_detect returns an empty list.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The peak_pick parameters were chosen by large-scale hyperparameter optimization over this dataset:
<a class="reference external" href="https://github.com/CPJKU/onset_db">https://github.com/CPJKU/onset_db</a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.onset.onset_strength">
<tt class="descclassname">librosa.onset.</tt><tt class="descname">onset_strength</tt><big>(</big><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>detrend=False</em>, <em>centering=True</em>, <em>feature=None</em>, <em>aggregate=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.onset.onset_strength" title="Permalink to this definition">¶</a></dt>
<dd><p>Spectral flux onset strength.</p>
<p>Onset strength at time t is determined by:</p>
<p><tt class="docutils literal"><span class="pre">mean_f</span> <span class="pre">max(0,</span> <span class="pre">S[f,</span> <span class="pre">t+1]</span> <span class="pre">-</span> <span class="pre">S[f,</span> <span class="pre">t])</span></tt></p>
<p>By default, if a time series is provided, S will be the log-power Mel spectrogram.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Mean aggregation with Mel-scaled spectrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onsets</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Median aggregation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onsets</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">aggregate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Log-frequency spectrogram instead of Mel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onsets</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">feature</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">logfsgram</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or Mel spectrogram with customized options</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onsets</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">n_mels</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="mi">32</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">audio time-series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray </span></dt>
<dd><p class="first last">pre-computed (log-power) spectrogram</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>detrend <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Filter the onset strength to remove</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>centering <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Shift the onset function by <tt class="docutils literal"><span class="pre">n_fft</span> <span class="pre">/</span> <span class="pre">(2</span> <span class="pre">*</span> <span class="pre">hop_length)</span></tt> frames</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>feature <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Function for computing time-series features, eg, scaled spectrograms.
By default, uses <tt class="docutils literal"><span class="pre">librosa.feature.melspectrogram</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>aggregate <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd><p class="first last">Aggregation function to use when combining onsets
at different frequency bins.
Default: <tt class="docutils literal"><span class="pre">np.mean</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs  </dt>
<dd><p class="first last">Parameters to <tt class="docutils literal"><span class="pre">feature()</span></tt>, if <tt class="docutils literal"><span class="pre">S</span></tt> is not provided.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">if <tt class="docutils literal"><span class="pre">S</span></tt> is provided, then <tt class="docutils literal"><span class="pre">(y,</span> <span class="pre">sr)</span></tt> are optional.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul>
<li><dl class="first docutils">
<dt>onsets <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray </span></dt>
<dd><p class="first last">vector of onset strengths</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError </dt>
<dd><p class="first last">if neither <tt class="docutils literal"><span class="pre">(y,</span> <span class="pre">sr)</span></tt> nor <tt class="docutils literal"><span class="pre">S</span></tt> are provided</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-librosa.output">
<span id="output"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Output</span></tt><a class="headerlink" href="#module-librosa.output" title="Permalink to this headline">¶</a></h2>
<p>Output routines for audio and analysis</p>
<dl class="function">
<dt id="librosa.output.annotation">
<tt class="descclassname">librosa.output.</tt><tt class="descname">annotation</tt><big>(</big><em>path</em>, <em>time_start</em>, <em>time_end</em>, <em>annotations=None</em>, <em>delimiter='</em>, <em>'</em>, <em>fmt='%0.3f'</em><big>)</big><a class="headerlink" href="#librosa.output.annotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Save annotations in a 3-column format:
``
time_start[0], time_end[0], annotations[0]</p>
<p>time_start[1], time_end[1], annotations[0]</p>
<p>time_start[2], time_end[2], annotations[0]</p>
<p>...
&#8216;&#8217;
This can be used for segment or chord annotations.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Detect segment boundaries</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">boundaries</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">agglomerative</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Convert to time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">boundary_times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">boundaries</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> 
<span class="go">                                            hop_length=hop_length)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Convert boundaries to start-ends</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">time_start</span><span class="p">,</span> <span class="n">time_end</span> <span class="o">=</span> <span class="n">boundaries</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">boundaries</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Make some fake annotations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;Segment #</span><span class="si">%03d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">time_start</span><span class="p">))]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Save the output</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">annotation</span><span class="p">(</span><span class="s">&#39;segments.csv&#39;</span><span class="p">,</span> <span class="n">time_start</span><span class="p">,</span> <span class="n">time_end</span><span class="p">,</span>
<span class="go">                              annotations=annotations)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><p class="first">path : str
path to save the output CSV file</p>
</li>
<li><p class="first">time_start : list-like 
array of starting times for annotations</p>
</li>
<li><p class="first">time_end : list-like
array of ending times for annotations</p>
</li>
<li><p class="first">annotations : None or list-like
optional list of annotation strings. <tt class="docutils literal"><span class="pre">annotations[i]</span></tt> applies to the time
range <tt class="docutils literal"><span class="pre">time_start[i]</span></tt> to <tt class="docutils literal"><span class="pre">time_end[i]</span></tt></p>
</li>
<li><dl class="first docutils">
<dt>delimiter <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">character to separate fields</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmt <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">format-string for rendering time</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError</dt>
<dd><p class="first last">if <tt class="docutils literal"><span class="pre">time_start</span></tt> and <tt class="docutils literal"><span class="pre">time_end</span></tt> have different length</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ValueError</dt>
<dd><p class="first last">if <tt class="docutils literal"><span class="pre">annotations</span></tt> is not <tt class="docutils literal"><span class="pre">None</span></tt> and length does not match <tt class="docutils literal"><span class="pre">time_start</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.output.frames_csv">
<tt class="descclassname">librosa.output.</tt><tt class="descname">frames_csv</tt><big>(</big><em>path</em>, <em>frames</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.output.frames_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert frames to time and store the output in CSV format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">frames_csv</span><span class="p">(</span><span class="s">&#39;beat_times.csv&#39;</span><span class="p">,</span> <span class="n">frames</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">path to save the output CSV file</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">list-like of ints</span></dt>
<dd><p class="first last">list of frame numbers for beat events</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">audio sampling rate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">number of samples between success frames</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>kwargs </dt>
<dd><p class="first last">additional keyword arguments.  See <tt class="docutils literal"><span class="pre">librosa.output.times_csv</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.output.times_csv">
<tt class="descclassname">librosa.output.</tt><tt class="descname">times_csv</tt><big>(</big><em>path</em>, <em>times</em>, <em>annotations=None</em>, <em>delimiter='</em>, <em>'</em>, <em>fmt='%0.3f'</em><big>)</big><a class="headerlink" href="#librosa.output.times_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Save time steps as in CSV format.  This can be used to store the output
of a beat-tracker or segmentation algorihtm.</p>
<dl class="docutils">
<dt>If only <tt class="docutils literal"><span class="pre">times</span></tt> are provided, the file will contain each value of <tt class="docutils literal"><span class="pre">times</span></tt> on a row:</dt>
<dd><p class="first">``
times[0]</p>
<p>times[1]</p>
<p>times[2]</p>
<p class="last">...
``</p>
</dd>
<dt>If <tt class="docutils literal"><span class="pre">annotations</span></tt> are also provided, the file will contain delimiter-separated values:</dt>
<dd><p class="first">``
times[0],annotations[0]</p>
<p>times[1],annotations[1]</p>
<p>times[2],annotations[2]</p>
<p class="last">...
``</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">beats</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">times_csv</span><span class="p">(</span><span class="s">&#39;beat_times.csv&#39;</span><span class="p">,</span> <span class="n">times</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">path to save the output CSV file</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">list-like of floats</span></dt>
<dd><p class="first last">list of frame numbers for beat events</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>annotations <span class="classifier-delimiter">:</span> <span class="classifier">None or list-like</span></dt>
<dd><p class="first last">optional annotations for each time step</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delimiter <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">character to separate fields</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>fmt <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first last">format-string for rendering time</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>ValueError</dt>
<dd><p class="first last">if <tt class="docutils literal"><span class="pre">annotations</span></tt> is not <tt class="docutils literal"><span class="pre">None</span></tt> and length does not match <tt class="docutils literal"><span class="pre">times</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.output.write_wav">
<tt class="descclassname">librosa.output.</tt><tt class="descname">write_wav</tt><big>(</big><em>path</em>, <em>y</em>, <em>sr</em><big>)</big><a class="headerlink" href="#librosa.output.write_wav" title="Permalink to this definition">¶</a></dt>
<dd><p>Output a time series as a .wav file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Trim a signal to 5 seconds and save it back</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.wav&#39;</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">write_wav</span><span class="p">(</span><span class="s">&#39;file_trim_5s.wav&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first last">
<li><dl class="first docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">str </span></dt>
<dd><p class="first last">path to save the output wav file</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray    </span></dt>
<dd><p class="first last">audio time series</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">sampling rate of <tt class="docutils literal"><span class="pre">y</span></tt></p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-librosa.segment">
<span id="segmentation"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Segmentation</span></tt><a class="headerlink" href="#module-librosa.segment" title="Permalink to this headline">¶</a></h2>
<p>Temporal segmentation utilities</p>
<dl class="function">
<dt id="librosa.segment.stack_memory">
<tt class="descclassname">librosa.segment.</tt><tt class="descname">stack_memory</tt><big>(</big><em>data</em>, <em>n_steps=2</em>, <em>delay=1</em>, <em>trim=True</em><big>)</big><a class="headerlink" href="#librosa.segment.stack_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Short-term history embedding.</p>
<p>Each column <tt class="docutils literal"><span class="pre">data[:,</span> <span class="pre">i]</span></tt> is mapped to</p>
<p><tt class="docutils literal"><span class="pre">data[:,i]</span> <span class="pre">-&gt;</span>&nbsp; <span class="pre">[</span>&nbsp;&nbsp; <span class="pre">data[:,</span> <span class="pre">i].T,</span> <span class="pre">data[:,</span> <span class="pre">i</span> <span class="pre">-</span> <span class="pre">delay].T</span> <span class="pre">...</span>&nbsp; <span class="pre">data[:,</span> <span class="pre">i</span> <span class="pre">-</span> <span class="pre">(n_steps-1)*delay].T</span> <span class="pre">].T</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mfccs</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_stack</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">stack_memory</span><span class="p">(</span><span class="n">mfccs</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">feature matrix (d-by-t)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>n_steps <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">embedding dimension, the number of steps back in time to stack</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delay <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">the number of columns to step</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>trim <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Crop dimension to original number of columns</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>data_history <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(d*m, t)</span></dt>
<dd><p class="first last">data augmented with lagged copies of itself.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">zeros are padded for the initial columns</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.segment.recurrence_matrix">
<tt class="descclassname">librosa.segment.</tt><tt class="descname">recurrence_matrix</tt><big>(</big><em>data</em>, <em>k=None</em>, <em>width=1</em>, <em>metric='sqeuclidean'</em>, <em>sym=False</em><big>)</big><a class="headerlink" href="#librosa.segment.recurrence_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the binary recurrence matrix from a time-series.</p>
<p><tt class="docutils literal"><span class="pre">rec[i,j]</span> <span class="pre">==</span> <span class="pre">True</span></tt> &lt;=&gt; (<tt class="docutils literal"><span class="pre">data[:,i]</span></tt>, <tt class="docutils literal"><span class="pre">data[:,j]</span></tt>) are k-nearest-neighbors and <tt class="docutils literal"><span class="pre">|i-j|</span> <span class="pre">&gt;=</span> <span class="pre">width</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc</span>    <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">recurrence_matrix</span><span class="p">(</span><span class="n">mfcc</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or fix the number of nearest neighbors to 5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">recurrence_matrix</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Suppress neighbors within +- 7 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">recurrence_matrix</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Use cosine similarity instead of Euclidean distance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">recurrence_matrix</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s">&#39;cosine&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Require mutual nearest neighbors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">recurrence_matrix</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">sym</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last">feature matrix (d-by-t)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>k <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 or None</span></dt>
<dd><p class="first last">the number of nearest-neighbors for each sample
Default: <tt class="docutils literal"><span class="pre">k</span> <span class="pre">=</span> <span class="pre">ceil(sqrt(t</span> <span class="pre">-</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">width</span> <span class="pre">+</span> <span class="pre">1))</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>width <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">only link neighbors <tt class="docutils literal"><span class="pre">(data[:,</span> <span class="pre">i],</span> <span class="pre">data[:,</span> <span class="pre">j])</span></tt> if <tt class="docutils literal"><span class="pre">|i-j|</span> <span class="pre">&gt;=</span> <span class="pre">width</span></tt></p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">see <tt class="docutils literal"><span class="pre">scipy.spatial.distance.pdist()</span></tt></span></dt>
<dd><p class="first last">distance metric to use for nearest-neighbor calculation</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>sym <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">set <tt class="docutils literal"><span class="pre">sym=True</span></tt> to only link mutual nearest-neighbors</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>rec <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(t,t), dtype=bool</span></dt>
<dd><p class="first last">Binary recurrence matrix</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.segment.structure_feature">
<tt class="descclassname">librosa.segment.</tt><tt class="descname">structure_feature</tt><big>(</big><em>rec</em>, <em>pad=True</em>, <em>inverse=False</em><big>)</big><a class="headerlink" href="#librosa.segment.structure_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the structure feature from a recurrence matrix.</p>
<p>The i&#8217;th column of the recurrence matrix is shifted up by i.
The resulting matrix is indexed horizontally by time,
and vertically by lag.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Build the structure feature over mfcc similarity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfccs</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">recurrence_matrix</span><span class="p">(</span><span class="n">mfccs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">structure_feature</span><span class="p">(</span><span class="n">R</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Invert the structure feature to get a recurrence matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">R_hat</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">structure_feature</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">inverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>rec <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(t,t)</span></dt>
<dd><p class="first last">recurrence matrix (see <cite>librosa.segment.recurrence_matrix</cite>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>pad <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Pad the matrix with t rows of zeros to avoid looping.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>inverse <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first last">Unroll the opposite direction. This is useful for converting
structure features back into recurrence plots.</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>struct <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">struct[i,</span> <span class="pre">t]</span></tt> = the recurrence at time <tt class="docutils literal"><span class="pre">t</span></tt> with lag <tt class="docutils literal"><span class="pre">i</span></tt>.</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">negative lag values are supported by wrapping to the end of the array.</p>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.segment.agglomerative">
<tt class="descclassname">librosa.segment.</tt><tt class="descname">agglomerative</tt><big>(</big><em>data</em>, <em>k</em><big>)</big><a class="headerlink" href="#librosa.segment.agglomerative" title="Permalink to this definition">¶</a></dt>
<dd><p>Bottom-up temporal segmentation.</p>
<p>Use a temporally-constrained agglomerative clustering routine to partition
<tt class="docutils literal"><span class="pre">data</span></tt> into <tt class="docutils literal"><span class="pre">k</span></tt> contiguous segments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Cluster by Mel spectrogram similarity</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Break into 32 segments</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span>                   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">boundary_frames</span>     <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">agglomerative</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="mi">32</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">boundary_times</span>      <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">boundary_frames</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first">
<li><dl class="first docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray    </span></dt>
<dd><p class="first last">feature matrix (d-by-t)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>k <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd><p class="first last">number of segments to produce</p>
</dd>
</dl>
</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul>
<li><dl class="first docutils">
<dt>boundaries <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(k,1)  </span></dt>
<dd><p class="first last">left-boundaries (frame numbers) of detected segments</p>
</dd>
</dl>
</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-librosa.util">
<span id="utilities"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">Utilities</span></tt><a class="headerlink" href="#module-librosa.util" title="Permalink to this headline">¶</a></h2>
<p>Utility functions</p>
<dl class="function">
<dt id="librosa.util.frame">
<tt class="descclassname">librosa.util.</tt><tt class="descname">frame</tt><big>(</big><em>y</em>, <em>frame_length=2048</em>, <em>hop_length=512</em><big>)</big><a class="headerlink" href="#librosa.util.frame" title="Permalink to this definition">¶</a></dt>
<dd><p>Slice a time series into overlapping frames.</p>
<p>This implementation uses low-level stride manipulation to avoid
redundant copies of the time series data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Load a file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">&#39;file.mp3&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Extract 2048-sample frames from y with a hop of 64</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_frames</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">frame</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">frame_length</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first simple">
<li>y : np.ndarray, ndim=1
Time series to frame</li>
<li>frame_length : int &gt; 0
Length of the frame in samples</li>
<li>hop_length : int &gt; 0
Number of samples to hop between frames</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>y_frames : np.ndarray, shape=(frame_length, N_FRAMES)
An array of frames sampled from <tt class="docutils literal"><span class="pre">y</span></tt>:
<tt class="docutils literal"><span class="pre">y_frames[i,</span> <span class="pre">j]</span> <span class="pre">==</span> <span class="pre">y[j</span> <span class="pre">*</span> <span class="pre">hop_length</span> <span class="pre">+</span> <span class="pre">i]</span></tt></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.util.pad_center">
<tt class="descclassname">librosa.util.</tt><tt class="descname">pad_center</tt><big>(</big><em>data</em>, <em>size</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#librosa.util.pad_center" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for np.pad to automatically center a vector prior to padding.
This is analogous to <tt class="docutils literal"><span class="pre">str.center()</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Generate a window vector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">hann</span><span class="p">(</span><span class="mi">256</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Center and pad it out to length 1024</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">window</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">pad_center</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;constant&#39;</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first simple">
<li>data : np.ndarray, ndim=1
Vector to be padded and centered</li>
<li>size : int &gt;= len(data)
Length to pad <tt class="docutils literal"><span class="pre">data</span></tt></li>
<li>kwargs
Additional keyword arguments passed to <tt class="docutils literal"><span class="pre">numpy.pad()</span></tt></li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>data_padded : np.ndarray, ndim=1
<tt class="docutils literal"><span class="pre">data</span></tt> centered and padded to length <tt class="docutils literal"><span class="pre">size</span></tt></li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.util.axis_sort">
<tt class="descclassname">librosa.util.</tt><tt class="descname">axis_sort</tt><big>(</big><em>S</em>, <em>axis=-1</em>, <em>index=False</em>, <em>value=None</em><big>)</big><a class="headerlink" href="#librosa.util.axis_sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort an array along its rows or columns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Visualize NMF output for a spectrogram S</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Sort the columns of W by peak frequency bin</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">W</span><span class="p">,</span> <span class="n">H</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">decompose</span><span class="o">.</span><span class="n">decompose</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">W_sort</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">axis_sort</span><span class="p">(</span><span class="n">W</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or sort by the lowest frequency bin</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">W_sort</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">axis_sort</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argmin</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or sort the rows instead of the columns</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">W_sort_rows</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">axis_sort</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get the sorting index also, and use it to permute the rows of H</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">W_sort</span><span class="p">,</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">axis_sort</span><span class="p">(</span><span class="n">W</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">H_sort</span> <span class="o">=</span> <span class="n">H</span><span class="p">[</span><span class="n">index</span><span class="p">,</span> <span class="p">:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># np.dot(W_sort, H_sort) == np.dot(W, H)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first simple">
<li>S : np.ndarray, ndim=2
Matrix to sort</li>
<li>axis : int
The axis along which to sort.<ul>
<li><tt class="docutils literal"><span class="pre">axis=0</span></tt> to sort rows by peak column index</li>
<li><tt class="docutils literal"><span class="pre">axis=1</span></tt> to sort columns by peak row index</li>
</ul>
</li>
<li>index : boolean    
If true, returns the index array as well as the permuted data.</li>
<li>value : function
function to return the index corresponding to the sort order.
Default: <tt class="docutils literal"><span class="pre">np.argmax</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><ul class="simple">
<li>S_sort : np.ndarray
<tt class="docutils literal"><span class="pre">S</span></tt> with the columns or rows permuted in sorting order</li>
<li>idx : np.ndarray (optional)
If <tt class="docutils literal"><span class="pre">index</span> <span class="pre">==</span> <span class="pre">True</span></tt>, the sorting index used to permute <tt class="docutils literal"><span class="pre">S</span></tt>.</li>
</ul>
</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises :</th><td class="field-body"><ul class="first last simple">
<li>ValueError
If <tt class="docutils literal"><span class="pre">S</span></tt> does not have 2 dimensions.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="librosa.util.normalize">
<tt class="descclassname">librosa.util.</tt><tt class="descname">normalize</tt><big>(</big><em>S</em>, <em>norm=inf</em>, <em>axis=0</em><big>)</big><a class="headerlink" href="#librosa.util.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalize the columns or rows of a matrix</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first simple">
<li>S : np.ndarray
The matrix to normalize</li>
<li>norm : {inf, -inf, 0, float &gt; 0}
- <tt class="docutils literal"><span class="pre">inf</span></tt>  : maximum absolute value
- <tt class="docutils literal"><span class="pre">-inf</span></tt> : mininum absolute value
- <tt class="docutils literal"><span class="pre">0</span></tt>    : number of non-zeros
- float  : corresponding l_p norm. See <tt class="docutils literal"><span class="pre">scipy.linalg.norm</span></tt> for details.</li>
<li>axis : int
Axis along which to compute the norm.
<tt class="docutils literal"><span class="pre">axis=0</span></tt> will normalize columns, <tt class="docutils literal"><span class="pre">axis=1</span></tt> will normalize rows.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>S_norm : np.ndarray
Normalized matrix</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Columns/rows with length 0 will be left as zeros.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.util.find_files">
<tt class="descclassname">librosa.util.</tt><tt class="descname">find_files</tt><big>(</big><em>directory</em>, <em>ext=None</em>, <em>recurse=True</em>, <em>case_sensitive=False</em>, <em>limit=None</em>, <em>offset=0</em><big>)</big><a class="headerlink" href="#librosa.util.find_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a sorted list of (audio) files in a directory or directory sub-tree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Usage :</th><td class="field-body"><div class="first highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Get all audio files in a directory sub-tree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="s">&#39;~/Music&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Look only within a specific directory, not the sub-tree</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="s">&#39;~/Music&#39;</span><span class="p">,</span> <span class="n">recurse</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Only look for mp3 files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="s">&#39;~/Music&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="s">&#39;mp3&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or just mp3 and ogg</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="s">&#39;~/Music&#39;</span><span class="p">,</span> <span class="n">ext</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;mp3&#39;</span><span class="p">,</span> <span class="s">&#39;ogg&#39;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Only get the first 10 files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="s">&#39;~/Music&#39;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Or last 10 files</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">files</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">find_files</span><span class="p">(</span><span class="s">&#39;~/Music&#39;</span><span class="p">,</span> <span class="n">offset</span><span class="o">=-</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters :</th><td class="field-body"><ul class="first simple">
<li>directory : str
Path to look for files</li>
<li>ext : str or list of str
A file extension or list of file extensions to include in the search.
Default: <tt class="docutils literal"><span class="pre">['aac',</span> <span class="pre">'au',</span> <span class="pre">'flac',</span> <span class="pre">'m4a',</span> <span class="pre">'mp3',</span> <span class="pre">'ogg',</span> <span class="pre">'wav']</span></tt></li>
<li>recurse : boolean
If <tt class="docutils literal"><span class="pre">True</span></tt>, then all subfolders of <tt class="docutils literal"><span class="pre">directory</span></tt> will be searched.
Otherwise, only <cite>directory</cite> will be searched.</li>
<li>case_sensitive : boolean
If <tt class="docutils literal"><span class="pre">False</span></tt>, files matching upper-case version of extensions will be included.</li>
<li>limit : int &gt;0 or None
Return at most <tt class="docutils literal"><span class="pre">limit</span></tt> files. If <tt class="docutils literal"><span class="pre">None</span></tt>, all files are returned.</li>
<li>offset : int
Return files starting at <tt class="docutils literal"><span class="pre">offset</span></tt> within the list.
Use negative values to offset from the end of the list.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><ul class="simple">
<li>files, list of str
The list of audio files.</li>
</ul>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Dawen Liang, Brian McFee, Matt McVicar, Colin Raffel.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>