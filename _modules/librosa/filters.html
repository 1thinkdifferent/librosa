

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>librosa.filters &mdash; librosa 0.4.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="librosa 0.4.1 documentation" href="../../index.html"/>
        <link rel="up" title="Module code" href="../index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../../index.html" class="icon icon-home"> librosa
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation instructions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../install.html#additional-notes">Additional notes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#quickstart">Quickstart</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#advanced-usage">Advanced usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorial.html#more-examples">More examples</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core.html">Core IO and DSP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../core.html#audio-processing">Audio processing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.load.html">librosa.core.load</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.to_mono.html">librosa.core.to_mono</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.resample.html">librosa.core.resample</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.get_duration.html">librosa.core.get_duration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.autocorrelate.html">librosa.core.autocorrelate</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.zero_crossings.html">librosa.core.zero_crossings</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.clicks.html">librosa.core.clicks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../core.html#spectral-representations">Spectral representations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.stft.html">librosa.core.stft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.istft.html">librosa.core.istft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.ifgram.html">librosa.core.ifgram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.cqt.html">librosa.core.cqt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.hybrid_cqt.html">librosa.core.hybrid_cqt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.pseudo_cqt.html">librosa.core.pseudo_cqt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.fmt.html">librosa.core.fmt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.phase_vocoder.html">librosa.core.phase_vocoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.magphase.html">librosa.core.magphase</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.logamplitude.html">librosa.core.logamplitude</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.perceptual_weighting.html">librosa.core.perceptual_weighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.A_weighting.html">librosa.core.A_weighting</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../core.html#time-and-frequency-conversion">Time and frequency conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.frames_to_samples.html">librosa.core.frames_to_samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.frames_to_time.html">librosa.core.frames_to_time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.samples_to_frames.html">librosa.core.samples_to_frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.samples_to_time.html">librosa.core.samples_to_time</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.time_to_frames.html">librosa.core.time_to_frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.time_to_samples.html">librosa.core.time_to_samples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.hz_to_note.html">librosa.core.hz_to_note</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.hz_to_midi.html">librosa.core.hz_to_midi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.midi_to_hz.html">librosa.core.midi_to_hz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.midi_to_note.html">librosa.core.midi_to_note</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.note_to_hz.html">librosa.core.note_to_hz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.note_to_midi.html">librosa.core.note_to_midi</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.hz_to_mel.html">librosa.core.hz_to_mel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.hz_to_octs.html">librosa.core.hz_to_octs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.mel_to_hz.html">librosa.core.mel_to_hz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.octs_to_hz.html">librosa.core.octs_to_hz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.fft_frequencies.html">librosa.core.fft_frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.cqt_frequencies.html">librosa.core.cqt_frequencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.mel_frequencies.html">librosa.core.mel_frequencies</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../core.html#pitch-and-tuning">Pitch and tuning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.estimate_tuning.html">librosa.core.estimate_tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.pitch_tuning.html">librosa.core.pitch_tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.piptrack.html">librosa.core.piptrack</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../core.html#deprecated">Deprecated</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.core.ifptrack.html">librosa.core.ifptrack</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../display.html">Display</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.display.specshow.html">librosa.display.specshow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.display.waveplot.html">librosa.display.waveplot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.display.time_ticks.html">librosa.display.time_ticks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.display.cmap.html">librosa.display.cmap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../feature.html">Feature extraction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../feature.html#spectral-features">Spectral features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.chroma_stft.html">librosa.feature.chroma_stft</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.chroma_cqt.html">librosa.feature.chroma_cqt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.melspectrogram.html">librosa.feature.melspectrogram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.mfcc.html">librosa.feature.mfcc</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.rmse.html">librosa.feature.rmse</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.spectral_centroid.html">librosa.feature.spectral_centroid</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.spectral_bandwidth.html">librosa.feature.spectral_bandwidth</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.spectral_contrast.html">librosa.feature.spectral_contrast</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.spectral_rolloff.html">librosa.feature.spectral_rolloff</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.poly_features.html">librosa.feature.poly_features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.tonnetz.html">librosa.feature.tonnetz</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.zero_crossing_rate.html">librosa.feature.zero_crossing_rate</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../feature.html#rhythm-features">Rhythm features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.tempogram.html">librosa.feature.tempogram</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../feature.html#feature-manipulation">Feature manipulation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.delta.html">librosa.feature.delta</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.stack_memory.html">librosa.feature.stack_memory</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../feature.html#deprecated">Deprecated</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.logfsgram.html">librosa.feature.logfsgram</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.feature.sync.html">librosa.feature.sync</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../onset.html">Onset detection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.onset.onset_detect.html">librosa.onset.onset_detect</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.onset.onset_strength.html">librosa.onset.onset_strength</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.onset.onset_strength_multi.html">librosa.onset.onset_strength_multi</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../beat.html">Beat and tempo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.beat.beat_track.html">librosa.beat.beat_track</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.beat.estimate_tempo.html">librosa.beat.estimate_tempo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../decompose.html">Spectrogram decomposition</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.decompose.decompose.html">librosa.decompose.decompose</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../generated/librosa.decompose.hpss.html">librosa.decompose.hpss</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../effects.html">Effects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../effects.html#harmonic-percussive-source-separation">Harmonic-percussive source separation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.effects.hpss.html">librosa.effects.hpss</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.effects.harmonic.html">librosa.effects.harmonic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.effects.percussive.html">librosa.effects.percussive</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../effects.html#time-and-frequency">Time and frequency</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.effects.time_stretch.html">librosa.effects.time_stretch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.effects.pitch_shift.html">librosa.effects.pitch_shift</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../effects.html#miscellaneous">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.effects.remix.html">librosa.effects.remix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../output.html">Output</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../output.html#text-output">Text output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.output.annotation.html">librosa.output.annotation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.output.times_csv.html">librosa.output.times_csv</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../output.html#audio-output">Audio output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.output.write_wav.html">librosa.output.write_wav</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../output.html#deprecated">Deprecated</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.output.frames_csv.html">librosa.output.frames_csv</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../segment.html">Temporal segmentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../segment.html#recurrence-and-self-similarity">Recurrence and self-similarity</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.segment.recurrence_matrix.html">librosa.segment.recurrence_matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.segment.recurrence_to_lag.html">librosa.segment.recurrence_to_lag</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.segment.lag_to_recurrence.html">librosa.segment.lag_to_recurrence</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.segment.timelag_filter.html">librosa.segment.timelag_filter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../segment.html#temporal-clustering">Temporal clustering</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.segment.agglomerative.html">librosa.segment.agglomerative</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.segment.subsegment.html">librosa.segment.subsegment</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../segment.html#deprecated">Deprecated</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.segment.structure_feature.html">librosa.segment.structure_feature</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../util.html">Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../util.html#array-operations">Array operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.frame.html">librosa.util.frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.pad_center.html">librosa.util.pad_center</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.fix_length.html">librosa.util.fix_length</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.fix_frames.html">librosa.util.fix_frames</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.index_to_slice.html">librosa.util.index_to_slice</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.sync.html">librosa.util.sync</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.axis_sort.html">librosa.util.axis_sort</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.normalize.html">librosa.util.normalize</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.sparsify_rows.html">librosa.util.sparsify_rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.buf_to_float.html">librosa.util.buf_to_float</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../util.html#matching">Matching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.match_intervals.html">librosa.util.match_intervals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.match_events.html">librosa.util.match_events</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../util.html#miscellaneous">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.localmax.html">librosa.util.localmax</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.peak_pick.html">librosa.util.peak_pick</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../util.html#input-validation">Input validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.valid_audio.html">librosa.util.valid_audio</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.valid_int.html">librosa.util.valid_int</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.valid_intervals.html">librosa.util.valid_intervals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../util.html#file-operations">File operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.example_audio_file.html">librosa.util.example_audio_file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.find_files.html">librosa.util.find_files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../util.html#sklearn-integration">sklearn integration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.FeatureExtractor.html">librosa.util.FeatureExtractor</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../util.html#deprecated">Deprecated</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.util.buf_to_int.html">librosa.util.buf_to_int</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filters.html">Filters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../filters.html#filter-bank-construction">Filter bank construction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.dct.html">librosa.filters.dct</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.mel.html">librosa.filters.mel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.chroma.html">librosa.filters.chroma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.constant_q.html">librosa.filters.constant_q</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../filters.html#miscellaneous">Miscellaneous</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.constant_q_lengths.html">librosa.filters.constant_q_lengths</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.cq_to_chroma.html">librosa.filters.cq_to_chroma</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.window_bandwidth.html">librosa.filters.window_bandwidth</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../filters.html#deprecated">Deprecated</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../generated/librosa.filters.logfrequency.html">librosa.filters.logfrequency</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../cache.html">Caching</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../cache.html#enabling-the-cache">Enabling the cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cache.html#cache-configuration">Cache configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../cache.html#example">Example</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v0-4-1">v0.4.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v0-4-0">v0.4.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v0-3-1">v0.3.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v0-3-0">v0.3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v0-2-1">v0.2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v0-2-0">v0.2.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../changelog.html#v0-1-0">v0.1.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">librosa</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Module code</a> &raquo;</li>
      
    <li>librosa.filters</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <h1>Source code for librosa.filters</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>
<span class="c"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Filters</span>
<span class="sd">=======</span>

<span class="sd">Filter bank construction</span>
<span class="sd">------------------------</span>
<span class="sd">.. autosummary::</span>
<span class="sd">    :toctree: generated/</span>

<span class="sd">    dct</span>
<span class="sd">    mel</span>
<span class="sd">    chroma</span>
<span class="sd">    constant_q</span>

<span class="sd">Miscellaneous</span>
<span class="sd">-------------</span>
<span class="sd">.. autosummary::</span>
<span class="sd">    :toctree: generated/</span>

<span class="sd">    constant_q_lengths</span>
<span class="sd">    cq_to_chroma</span>
<span class="sd">    window_bandwidth</span>

<span class="sd">Deprecated</span>
<span class="sd">----------</span>
<span class="sd">.. autosummary::</span>
<span class="sd">    :toctree: generated/</span>

<span class="sd">    logfrequency</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">import</span> <span class="nn">scipy.signal</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">cache</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">util</span>
<span class="kn">from</span> <span class="nn">.util.exceptions</span> <span class="kn">import</span> <span class="n">ParameterError</span>

<span class="kn">from</span> <span class="nn">.core.time_frequency</span> <span class="kn">import</span> <span class="n">note_to_hz</span><span class="p">,</span> <span class="n">hz_to_midi</span><span class="p">,</span> <span class="n">hz_to_octs</span>
<span class="kn">from</span> <span class="nn">.core.time_frequency</span> <span class="kn">import</span> <span class="n">fft_frequencies</span><span class="p">,</span> <span class="n">mel_frequencies</span>

<span class="c"># Dictionary of window function bandwidths</span>
<span class="n">WINDOW_BANDWIDTHS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">hann</span><span class="o">=</span><span class="mf">0.725</span><span class="p">)</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;dct&#39;</span><span class="p">,</span>
           <span class="s">&#39;mel&#39;</span><span class="p">,</span>
           <span class="s">&#39;chroma&#39;</span><span class="p">,</span>
           <span class="s">&#39;constant_q&#39;</span><span class="p">,</span>
           <span class="s">&#39;constant_q_lengths&#39;</span><span class="p">,</span>
           <span class="s">&#39;cq_to_chroma&#39;</span><span class="p">,</span>
           <span class="s">&#39;window_bandwidth&#39;</span><span class="p">,</span>
           <span class="c"># Deprecated</span>
           <span class="s">&#39;logfrequency&#39;</span><span class="p">]</span>


<span class="nd">@cache</span>
<div class="viewcode-block" id="dct"><a class="viewcode-back" href="../../generated/librosa.filters.dct.html#librosa.filters.dct">[docs]</a><span class="k">def</span> <span class="nf">dct</span><span class="p">(</span><span class="n">n_filters</span><span class="p">,</span> <span class="n">n_input</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Discrete cosine transform (DCT type-III) basis.</span>

<span class="sd">    .. [1] http://en.wikipedia.org/wiki/Discrete_cosine_transform</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n_filters : int &gt; 0 [scalar]</span>
<span class="sd">        number of output components (DCT filters)</span>

<span class="sd">    n_input : int &gt; 0 [scalar]</span>
<span class="sd">        number of input components (frequency bins)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    dct_basis: np.ndarray [shape=(n_filters, n_input)]</span>
<span class="sd">        DCT (type-III) basis vectors [1]_</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; n_fft = 2048</span>
<span class="sd">    &gt;&gt;&gt; dct_filters = librosa.filters.dct(13, 1 + n_fft // 2)</span>
<span class="sd">    &gt;&gt;&gt; dct_filters</span>
<span class="sd">    array([[ 0.031,  0.031, ...,  0.031,  0.031],</span>
<span class="sd">           [ 0.044,  0.044, ..., -0.044, -0.044],</span>
<span class="sd">           ...,</span>
<span class="sd">           [ 0.044,  0.044, ..., -0.044, -0.044],</span>
<span class="sd">           [ 0.044,  0.044, ...,  0.044,  0.044]])</span>

<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; plt.figure()</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(dct_filters, x_axis=&#39;linear&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.ylabel(&#39;DCT function&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;DCT filter bank&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar()</span>
<span class="sd">    &gt;&gt;&gt; plt.tight_layout()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">basis</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">((</span><span class="n">n_filters</span><span class="p">,</span> <span class="n">n_input</span><span class="p">))</span>
    <span class="n">basis</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">n_input</span><span class="p">)</span>

    <span class="n">samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">n_input</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">*</span> <span class="n">n_input</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_filters</span><span class="p">):</span>
        <span class="n">basis</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">i</span><span class="o">*</span><span class="n">samples</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">2.0</span><span class="o">/</span><span class="n">n_input</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">basis</span>

</div>
<span class="nd">@cache</span>
<div class="viewcode-block" id="mel"><a class="viewcode-back" href="../../generated/librosa.filters.mel.html#librosa.filters.mel">[docs]</a><span class="k">def</span> <span class="nf">mel</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="p">,</span> <span class="n">n_mels</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">htk</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a Filterbank matrix to combine FFT bins into Mel-frequency bins</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sr        : number &gt; 0 [scalar]</span>
<span class="sd">        sampling rate of the incoming signal</span>

<span class="sd">    n_fft     : int &gt; 0 [scalar]</span>
<span class="sd">        number of FFT components</span>

<span class="sd">    n_mels    : int &gt; 0 [scalar]</span>
<span class="sd">        number of Mel bands to generate</span>

<span class="sd">    fmin      : float &gt;= 0 [scalar]</span>
<span class="sd">        lowest frequency (in Hz)</span>

<span class="sd">    fmax      : float &gt;= 0 [scalar]</span>
<span class="sd">        highest frequency (in Hz).</span>
<span class="sd">        If `None`, use `fmax = sr / 2.0`</span>

<span class="sd">    htk       : bool [scalar]</span>
<span class="sd">        use HTK formula instead of Slaney</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    M         : np.ndarray [shape=(n_mels, 1 + n_fft/2)]</span>
<span class="sd">        Mel transform matrix</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; melfb = librosa.filters.mel(22050, 2048)</span>
<span class="sd">    &gt;&gt;&gt; melfb</span>
<span class="sd">    array([[ 0.   ,  0.016, ...,  0.   ,  0.   ],</span>
<span class="sd">           [ 0.   ,  0.   , ...,  0.   ,  0.   ],</span>
<span class="sd">           ...,</span>
<span class="sd">           [ 0.   ,  0.   , ...,  0.   ,  0.   ],</span>
<span class="sd">           [ 0.   ,  0.   , ...,  0.   ,  0.   ]])</span>


<span class="sd">    Clip the maximum frequency to 8KHz</span>

<span class="sd">    &gt;&gt;&gt; librosa.filters.mel(22050, 2048, fmax=8000)</span>
<span class="sd">    array([[ 0.  ,  0.02, ...,  0.  ,  0.  ],</span>
<span class="sd">           [ 0.  ,  0.  , ...,  0.  ,  0.  ],</span>
<span class="sd">           ...,</span>
<span class="sd">           [ 0.  ,  0.  , ...,  0.  ,  0.  ],</span>
<span class="sd">           [ 0.  ,  0.  , ...,  0.  ,  0.  ]])</span>


<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; plt.figure()</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(melfb, x_axis=&#39;linear&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.ylabel(&#39;Mel filter&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;Mel filter bank&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar()</span>
<span class="sd">    &gt;&gt;&gt; plt.tight_layout()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">fmax</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fmax</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">sr</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="c"># Initialize the weights</span>
    <span class="n">n_mels</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_mels</span><span class="p">)</span>
    <span class="n">weights</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_mels</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">n_fft</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)))</span>

    <span class="c"># Center freqs of each FFT bin</span>
    <span class="n">fftfreqs</span> <span class="o">=</span> <span class="n">fft_frequencies</span><span class="p">(</span><span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="n">n_fft</span><span class="p">)</span>

    <span class="c"># &#39;Center freqs&#39; of mel bands - uniformly spaced between limits</span>
    <span class="n">freqs</span> <span class="o">=</span> <span class="n">mel_frequencies</span><span class="p">(</span><span class="n">n_mels</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span>
                            <span class="n">fmin</span><span class="o">=</span><span class="n">fmin</span><span class="p">,</span>
                            <span class="n">fmax</span><span class="o">=</span><span class="n">fmax</span><span class="p">,</span>
                            <span class="n">htk</span><span class="o">=</span><span class="n">htk</span><span class="p">)</span>

    <span class="c"># Slaney-style mel is scaled to be approx constant energy per channel</span>
    <span class="n">enorm</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">/</span> <span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="n">n_mels</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">freqs</span><span class="p">[:</span><span class="n">n_mels</span><span class="p">])</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_mels</span><span class="p">):</span>
        <span class="c"># lower and upper slopes for all bins</span>
        <span class="n">lower</span> <span class="o">=</span> <span class="p">(</span><span class="n">fftfreqs</span> <span class="o">-</span> <span class="n">freqs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">freqs</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="n">upper</span> <span class="o">=</span> <span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">fftfreqs</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">freqs</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span>

        <span class="c"># .. then intersect them with each other and zero</span>
        <span class="n">weights</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">))</span> <span class="o">*</span> <span class="n">enorm</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">weights</span>

</div>
<span class="nd">@cache</span>
<div class="viewcode-block" id="chroma"><a class="viewcode-back" href="../../generated/librosa.filters.chroma.html#librosa.filters.chroma">[docs]</a><span class="k">def</span> <span class="nf">chroma</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="p">,</span> <span class="n">n_chroma</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">A440</span><span class="o">=</span><span class="mf">440.0</span><span class="p">,</span> <span class="n">ctroct</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
           <span class="n">octwidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">base_c</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Create a Filterbank matrix to convert STFT to chroma</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sr        : number &gt; 0 [scalar]</span>
<span class="sd">        audio sampling rate</span>

<span class="sd">    n_fft     : int &gt; 0 [scalar]</span>
<span class="sd">        number of FFT bins</span>

<span class="sd">    n_chroma  : int &gt; 0 [scalar]</span>
<span class="sd">        number of chroma bins</span>

<span class="sd">    A440      : float &gt; 0 [scalar]</span>
<span class="sd">        Reference frequency for A440</span>

<span class="sd">    ctroct    : float &gt; 0 [scalar]</span>

<span class="sd">    octwidth  : float &gt; 0 or None [scalar]</span>
<span class="sd">        `ctroct` and `octwidth` specify a dominance window -</span>
<span class="sd">        a Gaussian weighting centered on `ctroct` (in octs, A0 = 27.5Hz)</span>
<span class="sd">        and with a gaussian half-width of `octwidth`.</span>
<span class="sd">        Set `octwidth` to `None` to use a flat weighting.</span>

<span class="sd">    norm : float &gt; 0 or np.inf</span>
<span class="sd">        Normalization factor for each filter</span>

<span class="sd">    base_c : bool</span>
<span class="sd">        If True, the filter bank will start at &#39;C&#39;.</span>
<span class="sd">        If False, the filter bank will start at &#39;A&#39;.</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    wts : ndarray [shape=(n_chroma, 1 + n_fft / 2)]</span>
<span class="sd">        Chroma filter matrix</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    util.normalize</span>
<span class="sd">    feature.chroma_stft</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Build a simple chroma filter bank</span>

<span class="sd">    &gt;&gt;&gt; chromafb = librosa.filters.chroma(22050, 4096)</span>
<span class="sd">    array([[  1.689e-05,   3.024e-04, ...,   4.639e-17,   5.327e-17],</span>
<span class="sd">           [  1.716e-05,   2.652e-04, ...,   2.674e-25,   3.176e-25],</span>
<span class="sd">    ...,</span>
<span class="sd">           [  1.578e-05,   3.619e-04, ...,   8.577e-06,   9.205e-06],</span>
<span class="sd">           [  1.643e-05,   3.355e-04, ...,   1.474e-10,   1.636e-10]])</span>

<span class="sd">    Use quarter-tones instead of semitones</span>

<span class="sd">    &gt;&gt;&gt; librosa.filters.chroma(22050, 4096, n_chroma=24)</span>
<span class="sd">    array([[  1.194e-05,   2.138e-04, ...,   6.297e-64,   1.115e-63],</span>
<span class="sd">           [  1.206e-05,   2.009e-04, ...,   1.546e-79,   2.929e-79],</span>
<span class="sd">    ...,</span>
<span class="sd">           [  1.162e-05,   2.372e-04, ...,   6.417e-38,   9.923e-38],</span>
<span class="sd">           [  1.180e-05,   2.260e-04, ...,   4.697e-50,   7.772e-50]])</span>


<span class="sd">    Equally weight all octaves</span>

<span class="sd">    &gt;&gt;&gt; librosa.filters.chroma(22050, 4096, octwidth=None)</span>
<span class="sd">    array([[  3.036e-01,   2.604e-01, ...,   2.445e-16,   2.809e-16],</span>
<span class="sd">           [  3.084e-01,   2.283e-01, ...,   1.409e-24,   1.675e-24],</span>
<span class="sd">    ...,</span>
<span class="sd">           [  2.836e-01,   3.116e-01, ...,   4.520e-05,   4.854e-05],</span>
<span class="sd">           [  2.953e-01,   2.888e-01, ...,   7.768e-10,   8.629e-10]])</span>

<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; plt.figure()</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(chromafb, x_axis=&#39;linear&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.ylabel(&#39;Chroma filter&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;Chroma filter bank&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar()</span>
<span class="sd">    &gt;&gt;&gt; plt.tight_layout()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">wts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_chroma</span><span class="p">,</span> <span class="n">n_fft</span><span class="p">))</span>

    <span class="c"># Get the FFT bins, not counting the DC component</span>
    <span class="n">frequencies</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">False</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="n">frqbins</span> <span class="o">=</span> <span class="n">n_chroma</span> <span class="o">*</span> <span class="n">hz_to_octs</span><span class="p">(</span><span class="n">frequencies</span><span class="p">,</span> <span class="n">A440</span><span class="p">)</span>

    <span class="c"># make up a value for the 0 Hz bin = 1.5 octaves below bin 1</span>
    <span class="c"># (so chroma is 50% rotated from bin 1, and bin width is broad)</span>
    <span class="n">frqbins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(([</span><span class="n">frqbins</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1.5</span> <span class="o">*</span> <span class="n">n_chroma</span><span class="p">],</span> <span class="n">frqbins</span><span class="p">))</span>

    <span class="n">binwidthbins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="n">frqbins</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">frqbins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                                              <span class="mf">1.0</span><span class="p">),</span> <span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

    <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">subtract</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">frqbins</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_chroma</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="s">&#39;d&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

    <span class="n">n_chroma2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">n_chroma</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>

    <span class="c"># Project into range -n_chroma/2 .. n_chroma/2</span>
    <span class="c"># add on fixed offset of 10*n_chroma to ensure all values passed to</span>
    <span class="c"># rem are positive</span>
    <span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">remainder</span><span class="p">(</span><span class="n">D</span> <span class="o">+</span> <span class="n">n_chroma2</span> <span class="o">+</span> <span class="mi">10</span><span class="o">*</span><span class="n">n_chroma</span><span class="p">,</span> <span class="n">n_chroma</span><span class="p">)</span> <span class="o">-</span> <span class="n">n_chroma2</span>

    <span class="c"># Gaussian bumps - 2*D to make them narrower</span>
    <span class="n">wts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">D</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">binwidthbins</span><span class="p">,</span> <span class="p">(</span><span class="n">n_chroma</span><span class="p">,</span> <span class="mi">1</span><span class="p">)))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

    <span class="c"># normalize each column</span>
    <span class="n">wts</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">wts</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c"># Maybe apply scaling for fft bins</span>
    <span class="k">if</span> <span class="n">octwidth</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">wts</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(((</span><span class="n">frqbins</span><span class="o">/</span><span class="n">n_chroma</span> <span class="o">-</span> <span class="n">ctroct</span><span class="p">)</span><span class="o">/</span><span class="n">octwidth</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)),</span>
            <span class="p">(</span><span class="n">n_chroma</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">base_c</span><span class="p">:</span>
        <span class="n">wts</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">wts</span><span class="p">,</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="c"># remove aliasing columns, copy to ensure row-contiguity</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">ascontiguousarray</span><span class="p">(</span><span class="n">wts</span><span class="p">[:,</span> <span class="p">:</span><span class="nb">int</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">n_fft</span><span class="o">/</span><span class="mi">2</span><span class="p">)])</span>

</div>
<span class="nd">@util.decorators.deprecated</span><span class="p">(</span><span class="s">&#39;0.4&#39;</span><span class="p">,</span> <span class="s">&#39;0.5&#39;</span><span class="p">)</span>
<div class="viewcode-block" id="logfrequency"><a class="viewcode-back" href="../../generated/librosa.filters.logfrequency.html#librosa.filters.logfrequency">[docs]</a><span class="k">def</span> <span class="nf">logfrequency</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="p">,</span> <span class="n">n_bins</span><span class="o">=</span><span class="mi">84</span><span class="p">,</span> <span class="n">bins_per_octave</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">tuning</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
                 <span class="n">fmin</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">spread</span><span class="o">=</span><span class="mf">0.125</span><span class="p">):</span>  <span class="c"># pragma: no cover</span>
    <span class="sd">&#39;&#39;&#39;Approximate a constant-Q filter bank for a fixed-window STFT.</span>

<span class="sd">    Each filter is a log-normal window centered at the corresponding frequency.</span>

<span class="sd">    .. warning:: Deprecated in librosa 0.4</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sr : number &gt; 0 [scalar]</span>
<span class="sd">        audio sampling rate</span>

<span class="sd">    n_fft : int &gt; 0 [scalar]</span>
<span class="sd">        FFT window size</span>

<span class="sd">    n_bins : int &gt; 0 [scalar]</span>
<span class="sd">        Number of bins.  Defaults to 84 (7 octaves).</span>

<span class="sd">    bins_per_octave : int &gt; 0 [scalar]</span>
<span class="sd">        Number of bins per octave. Defaults to 12 (semitones).</span>

<span class="sd">    tuning : None or float in `[-0.5, +0.5]` [scalar]</span>
<span class="sd">        Tuning correction parameter, in fractions of a bin.</span>

<span class="sd">    fmin : float &gt; 0 [scalar]</span>
<span class="sd">        Minimum frequency bin. Defaults to `C1 ~= 32.70`</span>

<span class="sd">    spread : float &gt; 0 [scalar]</span>
<span class="sd">        Spread of each filter, as a fraction of a bin.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    C : np.ndarray [shape=(n_bins, 1 + n_fft/2)]</span>
<span class="sd">        log-frequency filter bank.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Simple log frequency filters</span>

<span class="sd">    &gt;&gt;&gt; logfb = librosa.filters.logfrequency(22050, 4096)</span>
<span class="sd">    &gt;&gt;&gt; logfb</span>
<span class="sd">    array([[ 0.,  0., ...,  0.,  0.],</span>
<span class="sd">           [ 0.,  0., ...,  0.,  0.],</span>
<span class="sd">    ...,</span>
<span class="sd">           [ 0.,  0., ...,  0.,  0.],</span>
<span class="sd">           [ 0.,  0., ...,  0.,  0.]])</span>


<span class="sd">    Use a narrower frequency range</span>

<span class="sd">    &gt;&gt;&gt; librosa.filters.logfrequency(22050, 4096, n_bins=48, fmin=110)</span>
<span class="sd">    array([[ 0.,  0., ...,  0.,  0.],</span>
<span class="sd">           [ 0.,  0., ...,  0.,  0.],</span>
<span class="sd">    ...,</span>
<span class="sd">           [ 0.,  0., ...,  0.,  0.],</span>
<span class="sd">           [ 0.,  0., ...,  0.,  0.]])</span>


<span class="sd">    Use narrower filters for sparser response: 5% of a semitone</span>

<span class="sd">    &gt;&gt;&gt; librosa.filters.logfrequency(22050, 4096, spread=0.05)</span>

<span class="sd">    Or wider: 50% of a semitone</span>

<span class="sd">    &gt;&gt;&gt; librosa.filters.logfrequency(22050, 4096, spread=0.5)</span>

<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; plt.figure()</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(logfb, x_axis=&#39;linear&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.ylabel(&#39;Logarithmic filters&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;Log-frequency filter bank&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar()</span>
<span class="sd">    &gt;&gt;&gt; plt.tight_layout()</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">fmin</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fmin</span> <span class="o">=</span> <span class="n">note_to_hz</span><span class="p">(</span><span class="s">&#39;C1&#39;</span><span class="p">)</span>

    <span class="c"># Apply tuning correction</span>
    <span class="n">correction</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">tuning</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span>

    <span class="c"># What&#39;s the shape parameter for our log-normal filters?</span>
    <span class="n">sigma</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">spread</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span>

    <span class="c"># Construct the output matrix</span>
    <span class="n">basis</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">n_bins</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">n_fft</span><span class="o">/</span><span class="mi">2</span><span class="p">)))</span>

    <span class="c"># Get log frequencies of bins</span>
    <span class="n">log_freqs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">fft_frequencies</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="p">)[</span><span class="mi">1</span><span class="p">:])</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_bins</span><span class="p">):</span>
        <span class="c"># What&#39;s the center (median) frequency of this filter?</span>
        <span class="n">c_freq</span> <span class="o">=</span> <span class="n">correction</span> <span class="o">*</span> <span class="n">fmin</span> <span class="o">*</span> <span class="p">(</span><span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">))</span>

        <span class="c"># Place a log-normal window around c_freq</span>
        <span class="n">basis</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">:]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">((</span><span class="n">log_freqs</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">c_freq</span><span class="p">))</span> <span class="o">/</span> <span class="n">sigma</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
                              <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">sigma</span><span class="p">)</span> <span class="o">-</span> <span class="n">log_freqs</span><span class="p">)</span>

    <span class="c"># Normalize the filters</span>
    <span class="n">basis</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">basis</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">basis</span>

</div>
<span class="k">def</span> <span class="nf">__float_window</span><span class="p">(</span><span class="n">window_function</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Decorator function for windows with fractional input.</span>

<span class="sd">    This function guarantees that for fractional `x`, the following hold:</span>

<span class="sd">    1. `__float_window(window_function)(x)` has length `np.ceil(x)`</span>
<span class="sd">    2. all values from `np.floor(x)` are set to 0.</span>

<span class="sd">    For integer-valued `x`, there should be no change in behavior.</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">_wrap</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;The wrapped window&#39;&#39;&#39;</span>
        <span class="n">n_min</span><span class="p">,</span> <span class="n">n_max</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">floor</span><span class="p">(</span><span class="n">n</span><span class="p">)),</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>

        <span class="n">window</span> <span class="o">=</span> <span class="n">window_function</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">window</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">n_max</span><span class="p">:</span>
            <span class="n">window</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pad</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_max</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="n">window</span><span class="p">))],</span>
                            <span class="n">mode</span><span class="o">=</span><span class="s">&#39;constant&#39;</span><span class="p">)</span>

        <span class="n">window</span><span class="p">[</span><span class="n">n_min</span><span class="p">:]</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="k">return</span> <span class="n">window</span>

    <span class="k">return</span> <span class="n">_wrap</span>


<span class="nd">@cache</span>
<div class="viewcode-block" id="constant_q"><a class="viewcode-back" href="../../generated/librosa.filters.constant_q.html#librosa.filters.constant_q">[docs]</a><span class="k">def</span> <span class="nf">constant_q</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">n_bins</span><span class="o">=</span><span class="mi">84</span><span class="p">,</span> <span class="n">bins_per_octave</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">tuning</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
               <span class="n">window</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">pad_fft</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">r&#39;&#39;&#39;Construct a constant-Q basis.</span>

<span class="sd">    This uses the filter bank described by [1]_.</span>

<span class="sd">    .. [1] McVicar, Matthew.</span>
<span class="sd">            &quot;A machine learning approach to automatic chord extraction.&quot;</span>
<span class="sd">            Dissertation, University of Bristol. 2013.</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sr : number &gt; 0 [scalar]</span>
<span class="sd">        Audio sampling rate</span>

<span class="sd">    fmin : float &gt; 0 [scalar]</span>
<span class="sd">        Minimum frequency bin. Defaults to `C1 ~= 32.70`</span>

<span class="sd">    n_bins : int &gt; 0 [scalar]</span>
<span class="sd">        Number of frequencies.  Defaults to 7 octaves (84 bins).</span>

<span class="sd">    bins_per_octave : int &gt; 0 [scalar]</span>
<span class="sd">        Number of bins per octave</span>

<span class="sd">    tuning : float in `[-0.5, +0.5)` [scalar]</span>
<span class="sd">        Tuning deviation from A440 in fractions of a bin</span>

<span class="sd">    window : function or `None`</span>
<span class="sd">        Windowing function to apply to filters.</span>
<span class="sd">        Default: `scipy.signal.hann`</span>

<span class="sd">    resolution : float &gt; 0 [scalar]</span>
<span class="sd">        Resolution of filter windows. Larger values use longer windows.</span>

<span class="sd">    pad_fft : boolean</span>
<span class="sd">        Center-pad all filters up to the nearest integral power of 2.</span>

<span class="sd">        By default, padding is done with zeros, but this can be overridden</span>
<span class="sd">        by setting the `mode=` field in *kwargs*.</span>

<span class="sd">    norm : {inf, -inf, 0, float &gt; 0}</span>
<span class="sd">        Type of norm to use for basis function normalization.</span>
<span class="sd">        See librosa.util.normalize</span>

<span class="sd">    kwargs : additional keyword arguments</span>
<span class="sd">        Arguments to `np.pad()` when `pad==True`.</span>


<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    filters : np.ndarray, `len(filters) == n_bins`</span>
<span class="sd">        `filters[i]` is `i`\ th time-domain CQT basis filter</span>

<span class="sd">    lengths : np.ndarray, `len(lengths) == n_bins`</span>
<span class="sd">        The (fractional) length of each filter</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    constant_q_lengths</span>
<span class="sd">    librosa.core.cqt</span>
<span class="sd">    librosa.util.normalize</span>


<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Use a longer window for each filter</span>

<span class="sd">    &gt;&gt;&gt; basis, lengths = librosa.filters.constant_q(22050, resolution=3)</span>

<span class="sd">    Plot one octave of filters in time and frequency</span>

<span class="sd">    &gt;&gt;&gt; basis, lengths = librosa.filters.constant_q(22050)</span>
<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; plt.figure(figsize=(10, 6))</span>
<span class="sd">    &gt;&gt;&gt; plt.subplot(2, 1, 1)</span>
<span class="sd">    &gt;&gt;&gt; notes = librosa.midi_to_note(np.arange(24, 24 + len(basis)))</span>
<span class="sd">    &gt;&gt;&gt; for i, (f, n) in enumerate(zip(basis, notes)[:12]):</span>
<span class="sd">    ...     f_scale = librosa.util.normalize(f) / 2</span>
<span class="sd">    ...     plt.plot(i + f_scale.real)</span>
<span class="sd">    ...     plt.plot(i + f_scale.imag, linestyle=&#39;:&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.axis(&#39;tight&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.yticks(range(len(notes[:12])), notes[:12])</span>
<span class="sd">    &gt;&gt;&gt; plt.ylabel(&#39;CQ filters&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;CQ filters (one octave, time domain)&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.xlabel(&#39;Time (samples at 22050 Hz)&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.legend([&#39;Real&#39;, &#39;Imaginary&#39;], frameon=True, framealpha=0.8)</span>
<span class="sd">    &gt;&gt;&gt; plt.subplot(2, 1, 2)</span>
<span class="sd">    &gt;&gt;&gt; F = np.abs(np.fft.fftn(basis, axes=[-1]))</span>
<span class="sd">    &gt;&gt;&gt; # Keep only the positive frequencies</span>
<span class="sd">    &gt;&gt;&gt; F = F[:, :(1 + F.shape[1] // 2)]</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(F, x_axis=&#39;linear&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.yticks(range(len(notes))[::12], notes[::12])</span>
<span class="sd">    &gt;&gt;&gt; plt.ylabel(&#39;CQ filters&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;CQ filter magnitudes (frequency domain)&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.tight_layout()</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">fmin</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fmin</span> <span class="o">=</span> <span class="n">note_to_hz</span><span class="p">(</span><span class="s">&#39;C1&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">window</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">hann</span>

    <span class="c"># Pass-through parameters to get the filter lengths</span>
    <span class="n">lengths</span> <span class="o">=</span> <span class="n">constant_q_lengths</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="p">,</span>
                                 <span class="n">n_bins</span><span class="o">=</span><span class="n">n_bins</span><span class="p">,</span>
                                 <span class="n">bins_per_octave</span><span class="o">=</span><span class="n">bins_per_octave</span><span class="p">,</span>
                                 <span class="n">tuning</span><span class="o">=</span><span class="n">tuning</span><span class="p">,</span>
                                 <span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">,</span>
                                 <span class="n">resolution</span><span class="o">=</span><span class="n">resolution</span><span class="p">)</span>

    <span class="c"># Apply tuning correction</span>
    <span class="n">correction</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">tuning</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span>
    <span class="n">fmin</span> <span class="o">=</span> <span class="n">correction</span> <span class="o">*</span> <span class="n">fmin</span>

    <span class="c"># Q should be capitalized here, so we suppress the name warning</span>
    <span class="c"># pylint: disable=invalid-name</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c"># Convert lengths back to frequencies</span>
    <span class="n">freqs</span> <span class="o">=</span> <span class="n">Q</span> <span class="o">*</span> <span class="n">sr</span> <span class="o">/</span> <span class="n">lengths</span>

    <span class="c"># Build the filters</span>
    <span class="n">filters</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">ilen</span><span class="p">,</span> <span class="n">freq</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">lengths</span><span class="p">,</span> <span class="n">freqs</span><span class="p">):</span>
        <span class="c"># Build the filter: note, length will be ceil(ilen)</span>
        <span class="n">sig</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">ilen</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1j</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">/</span> <span class="n">sr</span><span class="p">)</span>

        <span class="c"># Apply the windowing function</span>
        <span class="n">sig</span> <span class="o">=</span> <span class="n">sig</span> <span class="o">*</span> <span class="n">__float_window</span><span class="p">(</span><span class="n">window</span><span class="p">)(</span><span class="n">ilen</span><span class="p">)</span>

        <span class="c"># Normalize</span>
        <span class="n">sig</span> <span class="o">=</span> <span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">sig</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">norm</span><span class="p">)</span>

        <span class="n">filters</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span>

    <span class="c"># Pad and stack</span>
    <span class="n">max_len</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">pad_fft</span><span class="p">:</span>
        <span class="n">max_len</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">max_len</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">max_len</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">max_len</span><span class="p">))</span>

    <span class="n">filters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">([</span><span class="n">util</span><span class="o">.</span><span class="n">pad_center</span><span class="p">(</span><span class="n">filt</span><span class="p">,</span> <span class="n">max_len</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                          <span class="k">for</span> <span class="n">filt</span> <span class="ow">in</span> <span class="n">filters</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">filters</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">lengths</span><span class="p">)</span>

</div>
<span class="nd">@cache</span>
<div class="viewcode-block" id="constant_q_lengths"><a class="viewcode-back" href="../../generated/librosa.filters.constant_q_lengths.html#librosa.filters.constant_q_lengths">[docs]</a><span class="k">def</span> <span class="nf">constant_q_lengths</span><span class="p">(</span><span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="p">,</span> <span class="n">n_bins</span><span class="o">=</span><span class="mi">84</span><span class="p">,</span> <span class="n">bins_per_octave</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                       <span class="n">tuning</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="s">&#39;hann&#39;</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
    <span class="sd">r&#39;&#39;&#39;Return length of each filter in a constant-Q basis.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    sr : number &gt; 0 [scalar]</span>
<span class="sd">        Audio sampling rate</span>

<span class="sd">    fmin : float &gt; 0 [scalar]</span>
<span class="sd">        Minimum frequency bin.</span>

<span class="sd">    n_bins : int &gt; 0 [scalar]</span>
<span class="sd">        Number of frequencies.  Defaults to 7 octaves (84 bins).</span>

<span class="sd">    bins_per_octave : int &gt; 0 [scalar]</span>
<span class="sd">        Number of bins per octave</span>

<span class="sd">    tuning : float in `[-0.5, +0.5)` [scalar]</span>
<span class="sd">        Tuning deviation from A440 in fractions of a bin</span>

<span class="sd">    window : str or callable</span>
<span class="sd">        Window function to use on filters</span>

<span class="sd">    resolution : float &gt; 0 [scalar]</span>
<span class="sd">        Resolution of filter windows. Larger values use longer windows.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    lengths : np.ndarray</span>
<span class="sd">        The length of each filter.</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    constant_q</span>
<span class="sd">    librosa.core.cqt</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="n">fmin</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s">&#39;fmin must be positive&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">bins_per_octave</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s">&#39;bins_per_octave must be positive&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">resolution</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s">&#39;resolution must be positive&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">n_bins</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">n_bins</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s">&#39;n_bins must be a positive integer&#39;</span><span class="p">)</span>

    <span class="n">correction</span> <span class="o">=</span> <span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">tuning</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span>

    <span class="n">fmin</span> <span class="o">=</span> <span class="n">correction</span> <span class="o">*</span> <span class="n">fmin</span>

    <span class="c"># Q should be capitalized here, so we suppress the name warning</span>
    <span class="c"># pylint: disable=invalid-name</span>
    <span class="n">Q</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">resolution</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mf">2.0</span><span class="o">**</span><span class="p">(</span><span class="mf">1.</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="c"># Compute the frequencies</span>
    <span class="n">freq</span> <span class="o">=</span> <span class="n">fmin</span> <span class="o">*</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">**</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">n_bins</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">any</span><span class="p">(</span><span class="n">freq</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">window_bandwidth</span><span class="p">(</span><span class="n">window</span><span class="p">)</span> <span class="o">/</span> <span class="n">Q</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">sr</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s">&#39;Filter pass-band lies beyond Nyquist&#39;</span><span class="p">)</span>

    <span class="c"># Convert frequencies to filter lengths</span>
    <span class="n">lengths</span> <span class="o">=</span> <span class="n">Q</span> <span class="o">*</span> <span class="n">sr</span> <span class="o">/</span> <span class="n">freq</span>

    <span class="k">return</span> <span class="n">lengths</span>

</div>
<span class="nd">@cache</span>
<div class="viewcode-block" id="cq_to_chroma"><a class="viewcode-back" href="../../generated/librosa.filters.cq_to_chroma.html#librosa.filters.cq_to_chroma">[docs]</a><span class="k">def</span> <span class="nf">cq_to_chroma</span><span class="p">(</span><span class="n">n_input</span><span class="p">,</span> <span class="n">bins_per_octave</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">n_chroma</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                 <span class="n">fmin</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">base_c</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Convert a Constant-Q basis to Chroma.</span>


<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    n_input : int &gt; 0 [scalar]</span>
<span class="sd">        Number of input components (CQT bins)</span>

<span class="sd">    bins_per_octave : int &gt; 0 [scalar]</span>
<span class="sd">        How many bins per octave in the CQT</span>

<span class="sd">    n_chroma : int &gt; 0 [scalar]</span>
<span class="sd">        Number of output bins (per octave) in the chroma</span>

<span class="sd">    fmin : None or float &gt; 0</span>
<span class="sd">        Center frequency of the first constant-Q channel.</span>
<span class="sd">        Default: &#39;C1&#39; ~= 32.7 Hz</span>

<span class="sd">    window : None or np.ndarray</span>
<span class="sd">        If provided, the cq_to_chroma filter bank will be</span>
<span class="sd">        convolved with `window`.</span>

<span class="sd">    base_c : bool</span>
<span class="sd">        If True, the first chroma bin will start at &#39;C&#39;</span>
<span class="sd">        If False, the first chroma bin will start at &#39;A&#39;</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    cq_to_chroma : np.ndarray [shape=(n_chroma, n_input)]</span>
<span class="sd">        Transformation matrix: `Chroma = np.dot(cq_to_chroma, CQT)`</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ParameterError</span>
<span class="sd">        If `n_input` is not an integer multiple of `n_chroma`</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Get a CQT, and wrap bins to chroma</span>

<span class="sd">    &gt;&gt;&gt; y, sr = librosa.load(librosa.util.example_audio_file())</span>
<span class="sd">    &gt;&gt;&gt; CQT = librosa.cqt(y, sr=sr)</span>
<span class="sd">    &gt;&gt;&gt; chroma_map = librosa.filters.cq_to_chroma(CQT.shape[0])</span>
<span class="sd">    &gt;&gt;&gt; chromagram = chroma_map.dot(CQT)</span>
<span class="sd">    &gt;&gt;&gt; # Max-normalize each time step</span>
<span class="sd">    &gt;&gt;&gt; chromagram = librosa.util.normalize(chromagram, axis=0)</span>

<span class="sd">    &gt;&gt;&gt; import matplotlib.pyplot as plt</span>
<span class="sd">    &gt;&gt;&gt; plt.subplot(3, 1, 1)</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(librosa.logamplitude(CQT**2,</span>
<span class="sd">    ...                                               ref_power=np.max),</span>
<span class="sd">    ...                          y_axis=&#39;cqt_note&#39;, x_axis=&#39;time&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;CQT Power&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar()</span>
<span class="sd">    &gt;&gt;&gt; plt.subplot(3, 1, 2)</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(chromagram, y_axis=&#39;chroma&#39;, x_axis=&#39;time&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;Chroma (wrapped CQT)&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar()</span>
<span class="sd">    &gt;&gt;&gt; plt.subplot(3, 1, 3)</span>
<span class="sd">    &gt;&gt;&gt; chroma = librosa.feature.chromagram(y=y, sr=sr)</span>
<span class="sd">    &gt;&gt;&gt; librosa.display.specshow(chroma, y_axis=&#39;chroma&#39;, x_axis=&#39;time&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.title(&#39;librosa.feature.chroma&#39;)</span>
<span class="sd">    &gt;&gt;&gt; plt.colorbar()</span>
<span class="sd">    &gt;&gt;&gt; plt.tight_layout()</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c"># How many fractional bins are we merging?</span>
    <span class="n">n_merge</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">bins_per_octave</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_chroma</span>

    <span class="k">if</span> <span class="n">fmin</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">fmin</span> <span class="o">=</span> <span class="n">note_to_hz</span><span class="p">(</span><span class="s">&#39;C1&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">mod</span><span class="p">(</span><span class="n">n_merge</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ParameterError</span><span class="p">(</span><span class="s">&#39;Incompatible CQ merge: &#39;</span>
                             <span class="s">&#39;input bins must be an &#39;</span>
                             <span class="s">&#39;integer multiple of output bins.&#39;</span><span class="p">)</span>

    <span class="c"># Tile the identity to merge fractional bins</span>
    <span class="n">cq_to_ch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">repeat</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="n">n_chroma</span><span class="p">),</span> <span class="n">n_merge</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c"># Roll it left to center on the target bin</span>
    <span class="n">cq_to_ch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">cq_to_ch</span><span class="p">,</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_merge</span> <span class="o">//</span> <span class="mi">2</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

    <span class="c"># How many octaves are we repeating?</span>
    <span class="n">n_octaves</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float</span><span class="p">(</span><span class="n">n_input</span><span class="p">)</span> <span class="o">/</span> <span class="n">bins_per_octave</span><span class="p">)</span>

    <span class="c"># Repeat and trim</span>
    <span class="n">cq_to_ch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">tile</span><span class="p">(</span><span class="n">cq_to_ch</span><span class="p">,</span> <span class="nb">int</span><span class="p">(</span><span class="n">n_octaves</span><span class="p">))[:,</span> <span class="p">:</span><span class="n">n_input</span><span class="p">]</span>

    <span class="c"># What&#39;s the note number of the first bin in the CQT?</span>
    <span class="c"># midi uses 12 bins per octave here</span>
    <span class="n">midi_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mod</span><span class="p">(</span><span class="n">hz_to_midi</span><span class="p">(</span><span class="n">fmin</span><span class="p">),</span> <span class="mi">12</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">base_c</span><span class="p">:</span>
        <span class="c"># rotate to C</span>
        <span class="n">roll</span> <span class="o">=</span> <span class="n">midi_0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c"># rotate to A</span>
        <span class="n">roll</span> <span class="o">=</span> <span class="n">midi_0</span> <span class="o">-</span> <span class="mi">9</span>

    <span class="c"># Adjust the roll in terms of how many chroma we want out</span>
    <span class="c"># We need to be careful with rounding here</span>
    <span class="n">roll</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">roll</span> <span class="o">*</span> <span class="p">(</span><span class="n">n_chroma</span> <span class="o">/</span> <span class="mf">12.</span><span class="p">)))</span>

    <span class="c"># Apply the roll</span>
    <span class="n">cq_to_ch</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">roll</span><span class="p">(</span><span class="n">cq_to_ch</span><span class="p">,</span> <span class="n">roll</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">window</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">cq_to_ch</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">convolve</span><span class="p">(</span><span class="n">cq_to_ch</span><span class="p">,</span>
                                         <span class="n">np</span><span class="o">.</span><span class="n">atleast_2d</span><span class="p">(</span><span class="n">window</span><span class="p">),</span>
                                         <span class="n">mode</span><span class="o">=</span><span class="s">&#39;same&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">cq_to_ch</span>

</div>
<div class="viewcode-block" id="window_bandwidth"><a class="viewcode-back" href="../../generated/librosa.filters.window_bandwidth.html#librosa.filters.window_bandwidth">[docs]</a><span class="k">def</span> <span class="nf">window_bandwidth</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;Get the bandwidth of a window function.</span>

<span class="sd">    If the window function is unknown, return a default value.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    window : callable or string</span>
<span class="sd">        A window function, or the name of a window function.</span>
<span class="sd">        Examples:</span>
<span class="sd">        - scipy.signal.hann</span>
<span class="sd">        - &#39;boxcar&#39;</span>

<span class="sd">    default : float &gt;= 0</span>
<span class="sd">        The default value, if `window` is unknown.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bandwidth : float</span>
<span class="sd">        The bandwidth of the given window function</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    scipy.signal.windows</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="s">&#39;__name__&#39;</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">__name__</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">window</span>

    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">WINDOW_BANDWIDTHS</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;Unknown window function &#39;{:s}&#39;.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">WINDOW_BANDWIDTHS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>
</pre></div>

          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, librosa development team.
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.4.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>